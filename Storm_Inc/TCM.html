<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STORM_INC Tropical Cyclone Simulator-</title>
    <meta name="keywords" content="Hurricane Simulator, Typhoon Simulator, Tropical Cyclone Simulator, Storm Tracking, Weather Simulation, STROM_INC, å°é£æ¨¡æ‹Ÿå™¨, æ°”æ—‹æ¨¡æ‹Ÿ, é£“é£æ¨¡æ‹Ÿ, æ°”è±¡æ¸¸æˆ">
    <meta name="description" content="Experience realistic storm formation with STROM_INC. An advanced online Hurricane Simulator and Typhoon tracker. Create, track, and analyze tropical cyclones. ">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/topojson-client@3"></script>
    <script src="https://mrdoob.github.io/stats.js/build/stats.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <!-- å¼•å…¥ç§‘æŠ€æ„Ÿå­—ä½“ -->
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;500;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="favicon/android-chrome-192x192.png">
    <link rel="manifest" href="favicon/site.webmanifest">
    <link rel="mask-icon" href="favicon/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        slate: { 850: '#1f2937', 900: '#0f172a', 950: '#020617' }, // ä¿ç•™ä»¥å…¼å®¹ JS é€»è¾‘
                        cyan: { 450: '#22d3ee' }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    animation: {
                        'pulse-fast': 'pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    cursor: {
                        'grab': 'grab',
                        'grabbing': 'grabbing',
                    }
                }
            }
        }
    </script>

    <style>
        .roblox-bg {
            background: repeating-linear-gradient(
                45deg,
                #0f172a,
                #0f172a 30px,
                #0f172a 30px,
                #38bdf8 60px
            );
            animation: scrollBg 1s linear infinite;
        }

        @keyframes scrollBg {
            0% { background-position: 0 0; }
            100% { background-position: 85px 0; }
        }

        /* 2. æ ‡é¢˜ 3D æ•ˆæœï¼šå †å é˜´å½±æ³• (Stacked Shadows) */
        /* è¿™ç§æ–¹æ³•æ¯” transform: perspective æ›´æ¸…æ™°ï¼Œæ›´åƒ UI */
        .roblox-title {
            color: white;
            /* æè¾¹ */
            -webkit-text-stroke: 0.0px #0f172a;
            /* 3D åšåº¦ + æŠ•å½± */
            text-shadow:
                4px 4px 0px #0284c7, /* è“è‰²åšåº¦å±‚ */
                8px 8px 0px rgba(0,0,0,0.25); /* è½¯é˜´å½± */
        }

        /* 3. å®¹å™¨çš„"ç‰©ç†"åšåº¦ */
        .roblox-box-shadow {
            /* è®©è¿›åº¦æ¡çœ‹èµ·æ¥åƒæ˜¯åœ¨æµ®åœ¨ç©ºä¸­ï¼Œæœ‰åšåº¦ */
            box-shadow: 6px 6px 0px rgba(15, 23, 42, 0.4);
        }

        /* 4. æ–‡å­—æè¾¹è¾…åŠ©ç±» */
        .stroke-text {
            -webkit-text-stroke: 0px #0f172a;
        }

        /* å¼¹è·³åŠ¨ç”» */
        @keyframes bounceIn {
            0% { transform: scale(0.8); opacity: 0; }
            60% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); }
        }

        #loading-screen h1 {
            animation: bounceIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
        body {
            background-color: #000000;
            overflow: hidden; /* é˜²æ­¢å…¨å±åœ°å›¾æ»šåŠ¨ */
            user-select: none; /* é˜²æ­¢æ‹–æ‹½æ—¶é€‰ä¸­æ–‡å­— */
        }
        /* ç¡®ä¿å¼¹çª—ä¸»ä½“å…è®¸å†…å®¹æº¢å‡ºï¼ˆè¿™æ ·çŒ«å’ªæ‰èƒ½çªå‡ºæ¥ï¼‰ */
        #catModal .relative.w-full {
            overflow: visible !important;
        }

        /* è°ƒæ•´çŒ«å’ªå›¾ç‰‡çš„è§†è§‰é‡å¿ƒ */
        #catModal img {
            /* è¿™é‡Œçš„ translateY(40px) æ˜¯ä¸ºäº†è®©çŒ«å’ªçš„èº«ä½“åˆšå¥½å‹åœ¨è¾¹æ¡†ä¸Š */
            transform: translateY(-20px);
            image-rendering: -webkit-optimize-contrast; /* ä¿æŒå›¾ç‰‡æ¸…æ™° */
        }

        /* å“åº”å¼è°ƒæ•´ï¼šå¦‚æœæ˜¯å°å±å¹•ï¼Œç¼©å°å›¾ç‰‡ */
        @media (max-width: 640px) {
            #catModal .w-64 {
                width: 12rem; /* å°å±ä¸‹ç¼©å°å›¾ç‰‡ */
            }
            #catModal .relative.w-full {
                padding-top: 2rem;
            }
        }
        /* éšè—æ»šåŠ¨æ¡ä½†ä¿ç•™åŠŸèƒ½ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* è‡ªå®šä¹‰æ»‘å—æ ·å¼ */
        input[type=range] { -webkit-appearance: none; background: transparent; }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; height: 12px; width: 12px;
            background: #22d3ee; margin-top: -5px; cursor: pointer;
            border: 2px solid #000;
            box-shadow: 0 0 10px rgba(34, 211, 238, 0.8);
            transform: rotate(45deg); /* è±å½¢æ»‘å— */
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%; height: 2px; background: #334155;
        }

        /* æ‰«æçº¿æ•ˆæœ */
        .scanline {
            background: linear-gradient(
                to bottom,
                rgba(255,255,255,0),
                rgba(255,255,255,0) 50%,
                rgba(0,0,0,0.2) 50%,
                rgba(0,0,0,0.2)
            );
            background-size: 100% 4px;
        }
        @keyframes ring-breath {
            0% {
                outline: 2px solid rgba(255, 200, 200, 0.4);
                outline-offset: 2px;
            }
            50% {
                outline: 4px solid rgba(255, 100, 100, 0.9);
                outline-offset: 6px; /* äº§ç”Ÿç©ºå¿ƒé—´éš™æ„Ÿ */
            }
            100% {
                outline: 2px solid rgba(255, 0, 0, 0.4);
                outline-offset: 2px;
            }
        }
        
        @keyframes marquee {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        .animate-marquee {
            animation: marquee 60s linear infinite;
        }

        /* èµ‹äºˆæå¼ºæ°”æ—‹çš„å®å¿ƒåœ†ç¯ç±» */
        .extreme-intensity-glow {
            animation: ring-breath 1.8s infinite ease-in-out;
            stroke: #ffffff !important;
            stroke-width: 2px !important;
            /* ç¡®ä¿åœ†ç¯ä¸è¢«çˆ¶çº§å®¹å™¨å‰ªè£ */
            paint-order: stroke fill;
        }
        /* [ä¿®å¤] D3 Tooltip æ ·å¼ */
        .tooltip {
            position: absolute;
            text-align: left;
            padding: 10px 14px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
            background: rgba(10, 15, 20, 0.9); /* æ›´æ·±çš„èƒŒæ™¯ï¼Œé«˜å¯¹æ¯”åº¦ */
            color: #f1f5f9;
            border: 1px solid rgba(34, 211, 238, 0.5);
            border-left: 3px solid #22d3ee;
            border-radius: 4px;
            pointer-events: none; /* å…³é”®ï¼šé˜²æ­¢é˜»æŒ¡é¼ æ ‡äº‹ä»¶ï¼Œè§£å†³é—ªçƒé—®é¢˜ */
            z-index: 99999; /* ç¡®ä¿å±‚çº§æœ€é«˜ */
            box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 1);
            line-height: 1.6;
            opacity: 0; /* é»˜è®¤éšè— */
            transition: opacity 0.15s ease;
            white-space: nowrap;
            backdrop-filter: blur(4px);
        }

        /* æ‹–æ‹½æ—¶çš„æ ·å¼ */
        .draggable-active {
            cursor: grabbing !important;
            border-color: rgba(34, 211, 238, 0.8) !important;
            box-shadow: 0 0 25px rgba(34, 211, 238, 0.15) !important;
            z-index: 100 !important;
        }
        .titlepage {
          margin-left: 20px; /* å¢åŠ å·¦å¤–è¾¹è·ï¼Œå°†å…ƒç´ å‘å³æ¨20px */
        }
        
        #breaking-news-container {
            transition-timing-function: cubic-bezier(0.16, 1, 0.3, 1); /* ç±»ä¼¼å¼¹ç°§çš„æ»‘å…¥æ•ˆæœ */
        }
        
        /* ç¡®ä¿ SVG å’Œ Canvas éƒ½åœ¨å·¦ä¸Šè§’å¯¹é½ */
        #map-container svg,
        #map-container canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        #radar-canvas-layer {
            pointer-events: none !important;
            image-rendering: pixelated;
            width: 100%;
            height: 100%;
            z-index: 10;
        }
        /* è®© Canvas ç©¿é€é¼ æ ‡äº‹ä»¶ï¼Œè¿™æ ·ä½ ä¾ç„¶å¯ä»¥ä¸åº•ä¸‹çš„ SVG äº¤äº’ï¼ˆæ¯”å¦‚çœ‹ tooltipï¼‰ */
        #wind-canvas-layer {
            pointer-events: none;
            z-index: 10; /* æ”¾åœ¨ SVG ä¸Šå±‚ */
        }

        /* [ä¿®å¤] é™†åœ°é¢œè‰² - ç¡®ä¿ä¸æµ·æ´‹æœ‰è¶³å¤Ÿå¯¹æ¯” */
        .land {
            fill: #3a495e;     /* Slate-600: æ˜æ˜¾çš„ç°è“è‰² */
            stroke: #475569;   /* Slate-500: è¾¹ç•Œçº¿ */
            stroke-width: 0.8px;
            vector-effect: non-scaling-stroke; /* é˜²æ­¢ç¼©æ”¾æ—¶çº¿æ¡å˜ç²— */
        }

        /* ç»çº¬ç½‘ */
        .graticule {
            fill: none;
            stroke: #374151;   /* Slate-700 */
            stroke-width: 0.5px;
            opacity: 0.3;
            stroke-dasharray: 2 2;
        }

        /* é¢„æµ‹é”¥ (Forecast Cone) - å…¨æ¯è´¨æ„Ÿ */
        .forecast-cone {
            fill: rgba(34, 211, 238, 0.1); /* é’è‰²åŠé€æ˜å¡«å…… */
            stroke: rgba(34, 211, 238, 0.3); /* é’è‰²è¾¹æ¡† */
            stroke-width: 1px;
            stroke-dasharray: 4 4;
            pointer-events: none;
        }

        /* é¢„æµ‹è·¯å¾„çº¿ */
        .forecast-track {
            fill: none;
            stroke-width: 1.5px;
            stroke-dasharray: 3 3;
            opacity: 0.8;
            filter: drop-shadow(0 0 2px rgba(0,0,0,0.5));
        }

        /* å†å²/å®æµ‹è·¯å¾„çº¿ */
        .storm-track {
            fill: none;
            stroke-width: 2.5px;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        /* é£åœˆ (Wind Radii) */
        .wind-radii {
            opacity: 0.3;
            mix-blend-mode: screen;
            pointer-events: none;
        }

        /* ç­‰å‹çº¿ (Isobars) */
        .isobar {
            fill: none;
            stroke: #64748b; /* Slate-500 */
            stroke-width: 0.8px;
            opacity: 0.3;
        }
        .isobar-low {
            fill: none;
            stroke: #ef4444; /* Red-500 */
            stroke-width: 1.2px;
            opacity: 0.6;
        }
        .isohume-low {
            fill: none;
            stroke: #cd7e4a; /* Yellow-400 */
            stroke-width: 0.6px;
            opacity: 0.5;
        }
        .isohume {
            fill: none;
            stroke: #cdc84a; /* Yellow-400 */
            stroke-width: 0.6px;
            opacity: 0.5;
        }
        .isohume-med {
            fill: none;
            stroke: #4ade80; /* Green-400 */
            stroke-width: 0.6px;
            opacity: 0.5;
        }
        .isohume-high {
            fill: rgba(34, 197, 94, 0.1); /* Green-500 low opacity fill */
            stroke: #22c55e; /* Green-500 */
            stroke-width: 1.0px;
            opacity: 0.5;
        }
        /* é¢„æµ‹ç‚¹æ ‡ç­¾ */
        .forecast-point-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            fill: #e2e8f0;
            text-shadow: 0 2px 4px rgba(0,0,0,1);
            pointer-events: none;
            font-weight: bold;
        }

        /* ç«™ç‚¹æ ‡ç­¾ */
        .site-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            fill: #ffffff;
            font-weight: bold;
            text-shadow: 0 0 4px #000;
            pointer-events: none;
            background: rgba(0,0,0,0.5); /* å¢åŠ æ–‡å­—èƒŒæ™¯æé«˜å¯è¯»æ€§ */
        }
        
    </style>
</head>
<body class="w-screen h-screen font-sans text-slate-200 selection:bg-cyan-500/30 relative">
    
    <div id="loading-screen" class="fixed inset-0 z-[9999] flex flex-col items-center justify-center font-sans select-none overflow-hidden transition-opacity duration-500 bg-[#0f172a]">
        
        <div class="roblox-bg absolute inset-0 w-full h-full opacity-50"></div>

        <div class="relative z-10 flex flex-col items-center w-full max-w-lg px-4">
            
            <h1 class="roblox-title text-6xl md:text-7xl font-black italic mb-8 transform -rotate-3 text-center">
                STORM_INC
            </h1>

            <div class="w-full h-10 bg-white border-4 border-slate-900 rounded-full relative roblox-box-shadow overflow-hidden">
                <div id="loading-bar" class="h-full bg-gradient-to-b from-[#86efac] to-[#22c55e] border-r-4 border-slate-900 w-0 relative transition-all duration-[1000ms] ease-out">
                    <div class="absolute top-1 left-1 right-1 h-2 bg-white/40 rounded-full"></div>
                </div>
            </div>

            <div class="mt-6 flex flex-col items-center space-y-2">
                <span class="text-white font-black text-xl tracking-wider drop-shadow-md stroke-text">LOADING...</span>
                <div class="bg-slate-900/40 backdrop-blur-md px-6 py-2 rounded-2xl border-2 border-white/20">
                    <p id="loading-hint" class="text-white font-bold text-sm md:text-base text-center shadow-black drop-shadow-sm">
                        ğŸ’¡ Hint: Warm water fuels storms!
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 1. èƒŒæ™¯å±‚ (Z-Index: 0) -->
    <div id="animated-sphere-bg" class="absolute inset-0 z-0 opacity-40 pointer-events-none mix-blend-screen"></div>
    <div class="absolute inset-0 bg-[radial-gradient(circle_at_center,transparent_0%,#000000_90%)] z-0 pointer-events-none"></div>

    <!-- 2. åœ°å›¾å±‚ (æ ¸å¿ƒæ˜¾ç¤ºåŒº, Z-Index: 1) -->
    <div id="map-container" class="relative inset-0 z-[1] w-full h-full overflow-hidden bg-[#111827]">
        <canvas id="radar-canvas-layer" class="absolute top-0 left-0 w-full h-full pointer-events-none z-20 hidden"></canvas>
    </div>

    <!-- [æ–°åŠŸèƒ½] æ‚¬æµ®ç»„ä»¶å±‚ (Z-Index: 50) - å¯æ‹–æ‹½ -->
    
    <!-- 2.1 çŠ¶æ€ç›‘è§†å™¨ -->
    <div id="map-info-box" class="hidden fixed top-24 left-1/2 -translate-x-1/2 bg-black/80 backdrop-blur-md border border-white/20 px-6 py-2 rounded-full text-xs font-mono text-white z-50 shadow-2xl flex items-center gap-6 cursor-grab hover:border-cyan-500/50 transition-colors select-none group">
        <!-- æ‹–æ‹½æ‰‹æŸ„æç¤º -->
        <div class="absolute -top-4 left-1/2 -translate-x-1/2 text-[10px] text-cyan-500/50 opacity-0 group-hover:opacity-100 transition-opacity tracking-widest uppercase scale-75" data-t="drag">DRAG</div>
        
        <p id="map-info-time" class="font-bold text-cyan-400 tracking-wider pointer-events-none"></p>
        <div class="h-3 w-px bg-white/20 pointer-events-none"></div>
        <p id="map-info-intensity" class="text-yellow-400 font-bold pointer-events-none"></p>
        <div class="h-3 w-px bg-white/20 pointer-events-none"></div>
        <p id="map-info-movement" class="text-slate-300 pointer-events-none"></p>
    </div>

    <!-- 2.2 å¼ºåº¦æ›²çº¿å›¾ -->
    <div id="intensity-chart-section" class="hidden fixed bottom-12 right-6 w-96 bg-black/80 backdrop-blur-md border border-white/20 p-3 shadow-2xl z-50 cursor-grab hover:border-cyan-500/50 transition-colors select-none group rounded-lg">
        <div class="absolute top-0 right-0 w-3 h-3 border-t border-r border-white/30 pointer-events-none"></div>
        <div class="absolute bottom-0 left-0 w-3 h-3 border-b border-l border-white/30 pointer-events-none"></div>
        
        <div class="flex justify-between items-center mb-3">
            <div class="flex items-center gap-2 border-l-2 border-cyan-500 pl-2">
                <h3 id="intensity-chart-title" class="text-[9px] font-bold text-slate-400 uppercase tracking-widest">Intensity Profile</h3>
                <i class="fa-solid fa-grip text-slate-600 text-[10px] opacity-0 group-hover:opacity-100 transition-opacity"></i>
            </div>
            
            <div class="flex bg-slate-900/80 p-0.5 rounded border border-slate-700">
                <button id="tab-kt" class="px-2 py-0.5 text-[8px] font-bold rounded bg-cyan-600 text-white transition-all">KT</button>
                <button id="tab-hpa" class="px-2 py-0.5 text-[8px] font-bold rounded text-slate-400 hover:text-white transition-all">HPA</button>
            </div>
        </div>
        
        <div id="intensity-chart-container" class="w-full h-40 bg-black/40 border border-white/5"></div>
    </div>

    <!-- 3. UI äº¤äº’å±‚ (HUD, Z-Index: 40) -->
    <div class="absolute inset-0 z-40 pointer-events-none flex flex-col justify-between p-4 md:p-6">

        <!-- é¡¶éƒ¨æ  -->
        <header class="flex justify-between items-start pointer-events-auto">
            <div class="group relative left-8">
                <h1 class="text-2xl md:text-4xl font-black tracking-tighter text-white drop-shadow-lg italic">
                    STORM<span class="text-cyan-500">_</span>INC <span class="text-[10px] md:text-xs font-mono font-normal tracking-[0.3em] text-slate-500 not-italic align-middle ml-2 group-hover:text-cyan-400 transition-colors">DYNAMICS ENGINE</span>
                </h1>
                <div class="h-1 w-12 bg-cyan-500 mt-1 rounded-full group-hover:w-full transition-all duration-700 ease-out"></div>
            </div>

            <!-- è®¾ç½®æŒ‰é’®ä¸è¯­è¨€åˆ‡æ¢ -->
            <div class="flex gap-2 relative">
                <button id="catButton" class="bg-black/40 backdrop-blur-md border border-white/10 hover:border-cyan-400/50 text-slate-400 hover:text-cyan-400 w-10 h-10 rounded-full transition-all flex items-center justify-center shadow-lg hover:bg-white/5" title="News">
                    <i class="fa-solid fa-hurricane"></i>
                </button>
                <button id="helpButton" class="bg-black/40 backdrop-blur-md border border-white/10 hover:border-cyan-400/50 text-slate-400 hover:text-cyan-400 w-10 h-10 rounded-full transition-all flex items-center justify-center shadow-lg hover:bg-white/5" title="Gameplay Guide">
                <i class="fa-solid fa-question"></i>
                </button>
                <div class="relative group">
                    <button id="musicButton" class="bg-black/40 backdrop-blur-md border border-white/10 hover:border-cyan-400/50 text-slate-400 hover:text-cyan-400 w-10 h-10 rounded-full transition-all flex items-center justify-center shadow-lg hover:bg-white/5" title="BGM Playlist">
                        <i class="fa-solid fa-music"></i>
                    </button>

                    <div id="musicMenu" class="hidden absolute top-12 right-0 z-50 bg-[#050505]/95 backdrop-blur-xl border border-white/10 rounded-none shadow-[0_0_30px_rgba(0,0,0,0.8)] p-5 w-64 text-sm border-t-2 border-t-cyan-500">
                        <div class="flex justify-between items-center mb-4 border-b border-white/10 pb-2">
                            <span class="font-bold text-cyan-400 tracking-widest text-xs uppercase" data-t="track_select">Select Track</span>
                            <i class="fa-solid fa-list-ul text-slate-600"></i>
                        </div>
                        
                        <ul id="musicListContainer" class="space-y-1 max-h-60 overflow-y-auto custom-scrollbar">
                            </ul>
                        
                        <div class="mt-4 pt-2 border-t border-white/10 flex items-center gap-2">
                            <i class="fa-solid fa-volume-low text-xs text-slate-500"></i>
                            <input type="range" id="bgmVolume" min="0" max="1" step="0.1" value="0.4" class="w-full h-1 bg-slate-700 rounded appearance-none cursor-pointer accent-cyan-500">
                        </div>
                    </div>
                </div>
                <button id="sfxButton" class="bg-black/40 backdrop-blur-md border border-white/10 hover:border-cyan-400/50 text-cyan-400 w-10 h-10 rounded-full transition-all flex items-center justify-center shadow-lg hover:bg-white/5" title="Toggle SFX">
                    <i class="fa-solid fa-volume-high"></i>
                </button>
                <audio id="bgmAudio" loop preload="auto">
                    <source src="Freshly Squeezed - Graham Donald Harry Preskett.m4a" type="audio/mpeg">
                </audio>
                <!-- [æ–°å¢] è¯­è¨€åˆ‡æ¢æŒ‰é’® -->
                <button id="langButton" class="bg-black/40 backdrop-blur-md border border-white/10 hover:border-cyan-400/50 text-cyan-400 font-mono text-xs font-bold w-10 h-10 rounded-full transition-all flex items-center justify-center shadow-lg hover:bg-white/5" title="Switch Language">
                    EN
                </button>

                <button id="settingsButton" class="bg-black/40 backdrop-blur-md border border-white/10 hover:border-cyan-400/50 text-slate-400 hover:text-cyan-400 w-10 h-10 rounded-full transition-all flex items-center justify-center shadow-lg hover:bg-white/5">
                    <i class="fa-solid fa-sliders"></i>
                </button>
                
                <!-- è®¾ç½®èœå• -->
                <div id="settingsMenu" class="hidden absolute top-12 right-0 z-50 bg-[#050505]/95 backdrop-blur-xl border border-white/10 rounded-none shadow-[0_0_30px_rgba(0,0,0,0.8)] p-5 w-72 text-sm border-t-2 border-t-cyan-500">
                    <div class="flex justify-between items-center mb-4 border-b border-white/10 pb-2">
                        <span class="font-bold text-cyan-400 tracking-widest text-xs uppercase" data-t="config">Configuration</span>
                        <i class="fa-solid fa-gear text-slate-600"></i>
                    </div>
                    
                    <div class="space-y-5">
                        <div class="space-y-1">
                            <div class="flex justify-between text-[10px] uppercase tracking-wider text-slate-500 font-bold">
                                <label data-t="global_temp">Global Temp</label>
                                <span id="globalTempValue" class="font-mono text-cyan-400">289K</span>
                            </div>
                            <input type="range" id="globalTempSlider" min="279" max="305" value="289" step="1" class="w-full">
                        </div>
                        
                        <div class="space-y-1">
                            <div class="flex justify-between text-[10px] uppercase tracking-wider text-slate-500 font-bold">
                                <label data-t="shear">Vertical Shear</label>
                                <span id="globalShearValue" class="font-mono text-amber-400">100</span>
                            </div>
                            <input type="range" id="globalShearSlider" min="0" max="200" value="100" step="1" class="w-full">
                        </div>
                        
                        <div class="bg-white/5 p-3 border border-white/5">
                            <div class="text-[9px] font-bold text-slate-400 uppercase tracking-widest mb-2" data-t="obs_post">Observation Post</div>
                            <input type="text" id="siteNameInput" placeholder="SITE CALLSIGN" class="w-full bg-black border border-white/20 px-2 py-1 mb-2 text-xs text-white font-mono focus:border-cyan-500 outline-none uppercase placeholder-slate-700">
                            <div class="grid grid-cols-2 gap-2">
                                <input type="number" id="siteLonInput" placeholder="LON" step="0.1" class="w-full bg-black border border-white/20 px-2 py-1 text-xs text-white font-mono outline-none focus:border-cyan-500">
                                <input type="number" id="siteLatInput" placeholder="LAT" step="0.1" class="w-full bg-black border border-white/20 px-2 py-1 text-xs text-white font-mono outline-none focus:border-cyan-500">
                            </div>
                        </div>

                        <div class="bg-white/5 p-3 border border-white/5">
                            <div class="text-[9px] font-bold text-slate-400 uppercase tracking-widest mb-2" data-t="force_spawn">Force Spawn</div>
                            <div class="grid grid-cols-2 gap-2">
                                <input type="number" id="customLonInput" placeholder="LON" step="0.1" class="w-full bg-black border border-white/20 px-2 py-1 text-xs text-white font-mono outline-none focus:border-cyan-500">
                                <input type="number" id="customLatInput" placeholder="LAT" step="0.1" class="w-full bg-black border border-white/20 px-2 py-1 text-xs text-white font-mono outline-none focus:border-cyan-500">
                            </div>
                        </div>

                        <label class="flex items-center gap-3 cursor-pointer group">
                            <input type="checkbox" id="showPathPointsCheckbox" class="accent-cyan-500 w-4 h-4 bg-transparent border-slate-600 rounded-none">
                            <span class="text-slate-400 text-[10px] uppercase tracking-widest group-hover:text-cyan-400 transition-colors" data-t="track_nodes">Show Track Nodes</span>
                        </label>
                        
                        <label class="flex items-center gap-3 cursor-pointer group">
                            <input type="checkbox" id="irBwCheckbox" class="accent-cyan-500 w-4 h-4 bg-transparent border-slate-600 rounded-none">
                            <span class="text-slate-400 text-[10px] uppercase tracking-widest group-hover:text-cyan-400 transition-colors" data-t="irbw">IR / Enhanced</span>
                        </label>
                    </div>
                </div>
            </div>
        </header>
        
        <div id="news-feed-container" class="fixed top-24 right-0 z-50 pointer-events-none flex flex-col items-end gap-3 pr-0 overflow-visible transition-all duration-300">
            </div>
        
        <!-- å·¦ä¾§ HUD å†…å®¹ -->
        <div class="flex-1 flex items-start justify-between mt-6 relative pointer-events-none">
            <!-- å·¦ä¾§ï¼šé¥æµ‹æ•°æ®é¢æ¿ -->
            <div id="left-hud-content" class="w-72 md:w-80 flex flex-col gap-3 pointer-events-auto h-[calc(100vh-160px)] overflow-y-auto no-scrollbar pr-2">
                
                <!-- å«æ˜Ÿäº‘å›¾ -->
                <div id="satellite-window" class="hidden aspect-square bg-black border border-white/20 relative shadow-2xl group overflow-hidden">
                    <div class="absolute top-0 left-0 w-2 h-2 border-t border-l border-cyan-500 z-20"></div>
                    <div class="absolute top-0 right-0 w-2 h-2 border-t border-r border-cyan-500 z-20"></div>
                    <div class="absolute bottom-0 left-0 w-2 h-2 border-b border-l border-cyan-500 z-20"></div>
                    <div class="absolute bottom-0 right-0 w-2 h-2 border-b border-r border-cyan-500 z-20"></div>
                    
                    <div class="absolute top-3 left-3 z-10 flex items-center gap-2 bg-black/60 px-2 py-1 rounded">
                        <div class="w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse-fast shadow-[0_0_8px_red]"></div>
                        <span class="text-[9px] font-mono font-bold text-red-500 tracking-widest uppercase" data-t="sat_feed">SAT_FEED_LIVE</span>
                    </div>
                    
                    <button id="close-sat-btn" onclick="collapseSat()" class="absolute top-2 right-2 z-50 text-red-600 hover:text-red-400 transition-colors opacity-0 group-hover:opacity-100 p-1 cursor-pointer pointer-events-auto" title="Collapse View">
                        <i class="fa-solid fa-xmark text-lg"></i>
                    </button>
                    
                    <canvas id="satCanvas" class="w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity filter contrast-125"></canvas>
                    <div class="scanline absolute inset-0 pointer-events-none opacity-30"></div>
                </div>

                <!-- [æ–°å¢] æ¢å¤æŒ‰é’® (Collapsed State) (ä¿®æ”¹ï¼šæ·»åŠ  onclick) -->
                <button id="restore-sat-btn" onclick="expandSat()" class="hidden w-full h-6 flex items-center justify-center bg-black/60 border border-white/10 text-cyan-600/50 hover:text-cyan-400 hover:border-cyan-500/30 hover:bg-cyan-900/10 font-mono text-[10px] transition-all cursor-pointer shadow-lg backdrop-blur-sm group mb-3" title="Expand Satellite View">
                    <span class="group-hover:tracking-[0.5em] transition-all duration-300">^^^^^^^^^^^^</span>
                </button>

                <script>
                    // å…¨å±€æ§åˆ¶å‡½æ•°ï¼Œç¡®ä¿ç‚¹å‡»ç»å¯¹æœ‰æ•ˆ
                    window.collapseSat = function() {
                        const satWindow = document.getElementById('satellite-window');
                        const restoreBtn = document.getElementById('restore-sat-btn');
                        if (satWindow && restoreBtn) {
                            satWindow.classList.add('hidden');
                            restoreBtn.classList.remove('hidden');
                        }
                    }

                    window.expandSat = function() {
                        const satWindow = document.getElementById('satellite-window');
                        const restoreBtn = document.getElementById('restore-sat-btn');
                        if (satWindow && restoreBtn) {
                            restoreBtn.classList.add('hidden');
                            satWindow.classList.remove('hidden');
                        }
                    }
                </script>

                <!-- æ ¸å¿ƒæ•°æ®é¢æ¿ -->
                <div id="info-panel" class="bg-black/60 backdrop-blur-md border-l-2 border-cyan-500/50 p-4 shadow-lg min-h-[200px] h-fit flex flex-col relative flex-shrink-0">
                    <div class="absolute inset-0 bg-gradient-to-b from-cyan-500/5 to-transparent pointer-events-none"></div>

                    <div id="initial-message" class="flex-grow flex flex-col items-center justify-center text-slate-600 py-10">
                        <i class="fa-solid fa-satellite-dish text-4xl mb-4 opacity-30 animate-pulse"></i>
                        <p class="text-[10px] font-mono uppercase tracking-widest" data-t="await_init">Awaiting Initialization...</p>
                    </div>

                    <div id="simulation-output" class="hidden flex flex-col gap-4 relative z-10 pb-1">
                        <div class="border-b border-white/10 pb-2">
                            <h2 id="status" class="text-3xl font-black text-white tracking-tight">TD 01W</h2>
                            <div class="flex justify-between items-end mt-1">
                                <p id="simulationTime" class="text-cyan-400 font-mono text-[10px] tracking-wider">T+0h</p>
                                <div id="category" class="font-bold text-amber-400 text-xs uppercase tracking-wider bg-amber-900/20 px-2 py-0.5 border border-amber-500/30">--</div>
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-3">
                            <div class="bg-white/5 p-2 border border-white/5">
                                <div class="text-[9px] text-slate-400 uppercase tracking-widest mb-1" data-t="wind_spd">Wind Spd</div>
                                <div class="font-mono font-bold text-white text-lg leading-none"><span id="intensity">0</span> <span class="text-[10px] text-slate-500 font-normal"></span></div>
                            </div>
                            <div class="bg-white/5 p-2 border border-white/5">
                                <div class="text-[9px] text-slate-400 uppercase tracking-widest mb-1" data-t="pressure">Pressure</div>
                                <div class="font-mono font-bold text-cyan-300 text-lg leading-none"><span id="pressure">1000</span> <span class="text-[10px] text-slate-500 font-normal">hPa</span></div>
                            </div>
                        </div>

                        <div class="font-mono text-[10px] text-slate-400 space-y-1 bg-black/20 p-2 rounded border border-white/5">
                            <div class="flex justify-between">
                                <span><i class="fa-solid fa-location-dot mr-1 text-cyan-600"></i><span id="latitude">0.0N</span>, <span id="longitude">0.0E</span></span>
                            </div>
                            <div class="flex justify-between">
                                <span><i class="fa-solid fa-compass mr-1 text-cyan-600"></i><span id="direction">--</span> @ <span id="speed">0</span></span>
                            </div>
                            <div class="flex justify-between border-t border-white/10 pt-1 mt-1">
                                <span data-t="ace_index">ACE Index:</span>
                                <span id="ace" class="text-white font-bold">0.0</span>
                            </div>
                        </div>

                        <div id="best-track-container" class="hidden mt-auto pt-2">
                            <div class="text-[9px] font-bold text-green-500 mb-1 flex justify-between items-center">
                                <span data-t="atcf_stream">ATCF DATA STREAM</span>
                                <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                            </div>
                            <textarea id="best-track-data" readonly class="w-full h-36 bg-black text-green-500 font-mono text-[9px] p-2 border border-green-900/50 resize-none outline-none mb-2 shadow-inner"></textarea>
                            <div class="flex gap-2">
                                <button id="copy-track-button" class="flex-1 bg-slate-800 hover:bg-slate-700 text-slate-300 text-[9px] py-1.5 border border-white/10 transition" data-t="copy">COPY</button>
                                <button id="download-track-button" class="flex-1 bg-cyan-900/40 hover:bg-cyan-900/60 text-cyan-300 text-[9px] py-1.5 border border-cyan-500/30 transition" data-t="export_img">EXPORT IMG</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- åº•éƒ¨æ ï¼šæ ¸å¿ƒæ§åˆ¶å° -->
        <div class="flex justify-center pointer-events-auto pb-4 md:pb-0">
            <div class="
                bg-black/80 backdrop-blur-xl border-t border-white/10
                fixed bottom-0 left-0 w-full p-3 flex items-center gap-3 overflow-x-auto no-scrollbar z-50
                md:relative md:bg-black/70 md:border md:rounded-2xl md:w-auto md:bottom-auto md:p-2.5
            ">
                <div id="wind-radii-legend" class="hidden fixed bottom-20 left-1/2 -translate-x-1/2 bg-black/80 backdrop-blur-md border border-white/20 px-5 py-2 rounded-full flex items-center gap-6 z-40 shadow-[0_0_20px_rgba(0,0,0,0.8)] pointer-events-none transition-all duration-300 transform translate-y-4 opacity-0 data-[show=true]:translate-y-0 data-[show=true]:opacity-100">
                        <div class="flex items-center gap-2">
                            <div class="w-3 h-3 bg-[#c0392b] border border-white/30 shadow-[0_0_8px_rgba(192,57,43,0.6)]"></div>
                            <span class="text-[10px] font-mono text-slate-300 font-bold tracking-wider">64 KT</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-3 h-3 bg-[#e67e22] border border-white/30 shadow-[0_0_8px_rgba(230,126,34,0.6)]"></div>
                            <span class="text-[10px] font-mono text-slate-300 font-bold tracking-wider">50 KT</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-3 h-3 bg-[#f1c40f] border border-white/30 shadow-[0_0_8px_rgba(241,196,15,0.6)]"></div>
                            <span class="text-[10px] font-mono text-slate-300 font-bold tracking-wider">34 KT</span>
                        </div>
                    </div>
                <div id="radar-legend" class="hidden fixed bottom-20 left-1/2 -translate-x-1/2 bg-black/90 backdrop-blur-md border border-white/20 px-4 py-3 rounded-xl flex flex-col gap-1 z-40 shadow-[0_0_20px_rgba(0,0,0,0.8)] pointer-events-none transition-all duration-300 transform translate-y-4 opacity-0 data-[show=true]:translate-y-0 data-[show=true]:opacity-100 min-w-[320px]">
                    <div class="flex justify-between text-[10px] font-mono font-bold text-slate-400 px-1 tracking-widest">
                        <span>LIGHT</span>
                        <span>MODERATE</span>
                        <span>HARD</span>
                    </div>
                    <div class="w-full h-4 flex border border-white/30 rounded overflow-hidden">
                        <div class="flex-1 bg-[#00ffff]"></div> <div class="flex-1 bg-[#0099ff]"></div> <div class="flex-1 bg-[#0000ff]"></div> <div class="flex-1 bg-[#00ff00]"></div> <div class="flex-1 bg-[#00cc00]"></div> <div class="flex-1 bg-[#008000]"></div> <div class="flex-1 bg-[#ffff00]"></div> <div class="flex-1 bg-[#ffcc00]"></div> <div class="flex-1 bg-[#ff8000]"></div> <div class="flex-1 bg-[#ff0000]"></div> <div class="flex-1 bg-[#cc0000]"></div> <div class="flex-1 bg-[#ff00ff]"></div> <div class="flex-1 bg-[#800080]"></div> <div class="flex-1 bg-[#ffffff]"></div> </div>
                    <div class="flex justify-between text-[9px] font-mono text-slate-500 mt-0.5 px-1">
                        <span>15</span>
                        <span>30</span>
                        <span>45</span>
                        <span>60</span>
                        <span>75+</span>
                    </div>
                </div>

                <!-- [æ–°å¢] å¤šæ™®å‹’é›·è¾¾å›¾ä¾‹ -->
                <div id="doppler-legend" class="hidden fixed bottom-20 left-1/2 -translate-x-1/2 bg-black/90 backdrop-blur-md border border-white/20 px-4 py-3 rounded-xl flex flex-col gap-1 z-40 shadow-[0_0_20px_rgba(0,0,0,0.8)] pointer-events-none transition-all duration-300 transform translate-y-4 opacity-0 data-[show=true]:translate-y-0 data-[show=true]:opacity-100 min-w-[320px]">
                    <div class="flex justify-between text-[10px] font-mono font-bold text-slate-400 px-1 tracking-widest">
                        <span>INBOUND</span>
                        <span>ZERO</span>
                        <span>OUTBOUND</span>
                    </div>
                    <!-- ä½¿ç”¨ CSS çº¿æ€§æ¸å˜æ¨¡æ‹Ÿå¤šè‰²é˜¶ -->
                    <div class="w-full h-4 border border-white/30 rounded overflow-hidden"
                         style="background: linear-gradient(to right,
                            #6d28d9 0%,   /* -50+ */
                            #1e40af 10%,  /* -40 */
                            #3b82f6 20%,  /* -30 */
                            #15803d 30%,  /* -20 */
                            #22c55e 40%,  /* -10 */
                            #86efac 45%,  /* -5 */
                            #9ca3af 50%,  /* 0 */
                            #fde047 55%,  /* +5 */
                            #fb923c 60%,  /* +10 */
                            #f97316 70%,  /* +20 */
                            #ef4444 80%,  /* +30 */
                            #b91c1c 90%,  /* +40 */
                            #ec4899 100%  /* +50+ */
                         );">
                    </div>
                    <div class="flex justify-between text-[9px] font-mono text-slate-500 mt-0.5 px-1">
                        <span>-50</span>
                        <span>-25</span>
                        <span>0</span>
                        <span>+25</span>
                        <span>+50</span>
                    </div>
                </div>
                <!-- å¯åŠ¨æŒ‰é’® -->
                <button id="generateButton" class="group relative px-6 py-2 bg-slate-100 text-black rounded-xl font-bold text-xs md:text-sm tracking-wide shadow-lg hover:shadow-cyan-500/50 hover:bg-cyan-400 transition-all duration-300 overflow-hidden min-w-[120px]">
                    <span class="relative z-10 flex items-center justify-center gap-2" data-t="initialize"><i class="fa-solid fa-power-off"></i> INITIALIZE</span>
                    <div class="absolute inset-0 bg-white opacity-0 group-hover:opacity-20 transition-opacity"></div>
                </button>

                <div class="h-6 w-px bg-white/10"></div>

                <!-- å‚æ•°é€‰æ‹© -->
                <div class="flex gap-2">
                    <select id="basinSelector" class="bg-black/30 border border-white/10 text-slate-300 text-xs py-1.5 px-2 md:px-3 rounded-lg hover:border-cyan-500/50 focus:border-cyan-500 transition-colors outline-none cursor-pointer appearance-none text-center font-mono">
                        <option value="WPAC">WPAC</option>
                        <option value="EPAC">EPAC</option>
                        <option value="NATL">NATL</option>
                        <option value="NIO">NIO</option>
                        <option value="SHEM">SHEM</option>
                        <option value="SIO">SIO</option>
                        <option value="SATL">SATL</option>
                    </select>
                    <select id="monthSelector" class="bg-black/30 border border-white/10 text-slate-300 text-xs py-1.5 px-2 md:px-3 rounded-lg hover:border-cyan-500/50 focus:border-cyan-500 transition-colors outline-none cursor-pointer appearance-none text-center font-mono w-16">
                        <option value="1">JAN</option><option value="2">FEB</option><option value="3">MAR</option><option value="4">APR</option>
                        <option value="5">MAY</option><option value="6">JUN</option><option value="7" selected>JUL</option><option value="8">AUG</option>
                        <option value="9">SEP</option><option value="10">OCT</option><option value="11">NOV</option><option value="12">DEC</option>
                    </select>
                </div>

                <div class="h-6 w-px bg-white/10"></div>

                <!-- æ§åˆ¶æŒ‰é’®ç»„ -->
                <div class="flex gap-1.5">
                    <button id="pauseButton" class="w-8 h-8 flex items-center justify-center rounded-lg bg-white/5 hover:bg-white/10 text-slate-300 transition-all disabled:opacity-20 border border-transparent hover:border-white/20" disabled>
                        <i class="fa-solid fa-pause text-xs"></i>
                    </button>
                    
                    <button id="toggleWindRadiiButton" class="bg-slate-900 border border-slate-600 text-slate-300 hover:text-cyan-400 w-8 h-8 rounded-lg flex items-center justify-center transition-all text-xs" title="Wind Field">
                        <i class="fa-solid fa-bullseye"></i>
                    </button>
                    <button id="togglePressureButton" class="bg-slate-900 border border-slate-600 text-slate-300 hover:text-cyan-400 w-8 h-8 rounded-lg flex items-center justify-center transition-all text-xs" title="Pressure">
                        <i class="fa-solid fa-wind"></i>
                    </button>
                    <button id="toggleHumidityButton" class="bg-slate-900 border border-slate-600 text-slate-300 hover:text-cyan-400 w-8 h-8 rounded-lg flex items-center justify-center transition-all text-xs" title="850mb RH">
                        <i class="fa-solid fa-droplet"></i>
                    </button>
                    <button id="toggleWindFieldButton" class="bg-slate-900 border border-slate-600 text-slate-300 hover:text-cyan-400 w-8 h-8 rounded-lg flex items-center justify-center transition-all text-xs" title="100m Level Wind">
                        <i class="fa-solid fa-right-left"></i>
                    </button>
                    <button id="togglePathButton" class="bg-slate-900 border border-slate-600 text-slate-300 hover:text-cyan-400 w-8 h-8 rounded-lg flex items-center justify-center transition-all text-xs" title="Forecast">
                        <i class="fa-solid fa-route"></i>
                    </button>
                    <button id="toggleHistoryButton" class="bg-slate-900 border border-slate-600 text-slate-300 hover:text-cyan-400 w-8 h-8 rounded-lg flex items-center justify-center transition-all text-xs" title="History">
                        <i class="fa-solid fa-clock-rotate-left"></i>
                    </button>
                    <div class="h-6 w-px bg-white/10 mx-1"></div> <button id="generateJTWCButton" class="hidden relative group bg-red-900/40 border border-red-500/50 text-red-400 hover:bg-red-600 hover:text-white w-24 h-8 rounded-lg flex items-center justify-center transition-all text-[10px] font-bold tracking-wider uppercase shadow-[0_0_15px_rgba(220,38,38,0.3)] animate-pulse" title="Generate JTWC Graphic">
                        <i class="fa-solid fa-file-image mr-2"></i> ICWC
                        <span class="absolute -top-10 left-1/2 -translate-x-1/2 bg-black/90 text-white text-[9px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none border border-red-500/30">
                            Export Graphic
                        </span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- å†å²è®°å½•æ¨¡æ€æ¡† -->
    <div id="historyModal" class="hidden fixed inset-0 z-[100] bg-black/90 backdrop-blur-sm flex items-center justify-center p-4">
        <div class="bg-[#0a0a0c] w-full max-w-lg rounded-none border border-white/20 shadow-2xl flex flex-col max-h-[80vh] relative">
            <div class="absolute -top-1 -left-1 w-4 h-4 border-t-2 border-l-2 border-cyan-500"></div>
            <div class="absolute -bottom-1 -right-1 w-4 h-4 border-b-2 border-r-2 border-cyan-500"></div>

            <div class="p-4 border-b border-white/10 flex justify-between items-center bg-white/5">
                <h2 class="text-sm font-bold text-white uppercase tracking-widest" data-t="sim_logs"><i class="fa-solid fa-database mr-2 text-cyan-500"></i>Simulation Logs</h2>
                <button id="closeHistoryModal" class="text-slate-500 hover:text-white transition-colors"><i class="fa-solid fa-xmark"></i></button>
            </div>
            
            <div class="p-4 overflow-y-auto flex-1 custom-scrollbar">
                <ul id="historyList" class="space-y-1 font-mono text-xs"></ul>
            </div>

            <div id="history-best-track-container" class="hidden p-4 border-t border-white/10 bg-black">
                <h3 class="text-[9px] font-bold text-cyan-400 mb-2 uppercase tracking-widest" data-t="raw_atcf">Raw ATCF Data</h3>
                <textarea id="history-best-track-data" readonly class="w-full h-24 bg-[#050505] text-slate-400 p-2 border border-white/10 font-mono text-[9px] outline-none mb-2"></textarea>
                <button id="downloadHistoryTrackButton" class="w-full bg-cyan-900/50 hover:bg-cyan-900 text-cyan-200 border border-cyan-500/30 text-xs font-bold py-2 transition uppercase tracking-wider" data-t="download_log">Download Log (.txt)</button>
            </div>
        </div>
    </div>
    <div id="jtwcModal" class="hidden fixed inset-0 z-[200] bg-black/80 backdrop-blur-md flex items-center justify-center p-4">
        <div class="bg-white p-2 max-w-4xl w-full shadow-2xl relative">
            <button id="closeJtwcModal" class="absolute -top-10 right-0 text-white hover:text-red-500 text-2xl transition-colors">
                <i class="fa-solid fa-circle-xmark"></i>
            </button>
            <div id="jtwcOutput" class="w-full bg-[#99badd] border-2 border-black flex justify-center items-center overflow-hidden" style="min-height: 400px;">
                </div>
            <div class="bg-white text-black p-2 text-xs font-mono flex justify-between items-center border-t-2 border-black mt-1">
                <span>VISUALIZATION PROVIDED BY INDEPENDENT CYCLONE WARNING CENTER</span>
                <button id="saveJtwcImage" class="bg-blue-600 text-white px-3 py-1 hover:bg-blue-700 font-bold">SAVE IMAGE</button>
            </div>
        </div>
    </div>
    <div id="newsModal" class="hidden fixed inset-0 z-[200] bg-black/95 flex items-center justify-center backdrop-blur-xl">
        <button id="closeNewsModal" class="absolute top-4 right-4 z-50 text-white/50 hover:text-white text-3xl transition-colors">
            <i class="fa-solid fa-xmark"></i>
        </button>

        <div class="relative w-full max-w-[85vw] aspect-video bg-[#0f172a] shadow-2xl overflow-hidden border border-slate-700">
            
            <div class="absolute top-0 left-0 w-full h-16 bg-gradient-to-r from-blue-700 to-blue-600 z-20 flex items-center shadow-lg border-b border-white/10">
                <div class="bg-white text-blue-700 font-black text-xl px-6 h-full flex items-center z-30 shadow-md italic tracking-tighter">
                    WEATHER UPD
                </div>
                <div class="flex-1 overflow-hidden relative h-full flex items-center">
                    <div id="newsTicker" class="whitespace-nowrap text-white font-mono text-2xl font-bold tracking-widest uppercase animate-marquee pl-4">
                        </div>
                </div>
            </div>

            <canvas id="newsCanvas" width="1728" height="972" class="w-full h-full object-cover"></canvas>
            
            <div class="absolute bottom-0 left-0 w-full h-12 bg-gradient-to-t from-black/80 to-transparent pointer-events-none"></div>
            <div class="absolute bottom-4 right-6 text-white/30 font-mono text-sm font-bold tracking-[0.5em]">
                STROM_INC BROADCAST SYSTEM
            </div>
        </div>
    </div>
    <div id="helpModal" class="hidden fixed inset-0 z-[100] bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 opacity-0 transition-opacity duration-300">
            <div class="bg-[#0a0a0c] w-full max-w-4xl h-[600px] rounded-none border border-white/20 shadow-[0_0_50px_rgba(34,211,238,0.1)] flex flex-col relative transform scale-95 transition-transform duration-300 overflow-hidden">
                <div class="absolute -top-1 -left-1 w-4 h-4 border-t-2 border-l-2 border-cyan-500 z-50"></div>
                <div class="absolute -bottom-1 -right-1 w-4 h-4 border-b-2 border-r-2 border-cyan-500 z-50"></div>

                <div class="p-4 border-b border-white/10 flex justify-between items-center bg-white/5 flex-shrink-0">
                    <h2 class="text-sm font-bold text-white uppercase tracking-widest flex items-center gap-2">
                        <i class="fa-solid fa-book-open text-cyan-500"></i>
                        <span data-t="guide_title">Operational Manual</span>
                    </h2>
                    <button id="closeHelpModal" class="text-slate-500 hover:text-white transition-colors w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/10">
                        <i class="fa-solid fa-xmark text-lg"></i>
                    </button>
                </div>

                <div class="flex flex-1 overflow-hidden">
                    <div class="w-64 bg-black/40 border-r border-white/10 p-3 space-y-1 flex-shrink-0 flex flex-col overflow-y-auto no-scrollbar">
                        <button onclick="switchTab('tab-overview')" class="nav-btn active w-full text-left px-3 py-3 text-[10px] font-mono uppercase tracking-wider text-slate-400 hover:bg-white/5 hover:text-cyan-400 rounded border border-transparent transition-all flex items-center gap-3" data-target="tab-overview">
                            <i class="fa-solid fa-house w-4 text-center"></i> <span data-t="tab_overview">Overview</span>
                        </button>
                        <div class="h-px bg-white/10 my-2"></div>
                        <div class="text-[9px] text-slate-600 font-bold px-3 py-1 uppercase tracking-widest" data-t="nav_layers">Data Layers</div>
                        
                        <button onclick="switchTab('tab-radii')" class="nav-btn w-full text-left px-3 py-2 text-[10px] font-mono uppercase tracking-wider text-slate-400 hover:bg-white/5 hover:text-cyan-400 rounded border border-transparent transition-all flex items-center gap-3" data-target="tab-radii">
                            <i class="fa-solid fa-bullseye w-4 text-center"></i> <span data-t="tab_radii">Wind Radii</span>
                        </button>
                        <button onclick="switchTab('tab-pressure')" class="nav-btn w-full text-left px-3 py-2 text-[10px] font-mono uppercase tracking-wider text-slate-400 hover:bg-white/5 hover:text-cyan-400 rounded border border-transparent transition-all flex items-center gap-3" data-target="tab-pressure">
                            <i class="fa-solid fa-wind w-4 text-center"></i> <span data-t="tab_pressure">Steering Flow</span>
                        </button>
                        <button onclick="switchTab('tab-humidity')" class="nav-btn w-full text-left px-3 py-2 text-[10px] font-mono uppercase tracking-wider text-slate-400 hover:bg-white/5 hover:text-cyan-400 rounded border border-transparent transition-all flex items-center gap-3" data-target="tab-humidity">
                            <i class="fa-solid fa-droplet w-4 text-center"></i> <span data-t="tab_humidity">850mb Humidity</span>
                        </button>
                        <button onclick="switchTab('tab-wind')" class="nav-btn w-full text-left px-3 py-2 text-[10px] font-mono uppercase tracking-wider text-slate-400 hover:bg-white/5 hover:text-cyan-400 rounded border border-transparent transition-all flex items-center gap-3" data-target="tab-wind">
                            <i class="fa-solid fa-right-left w-4 text-center"></i> <span data-t="tab_wind">Low Level Wind</span>
                        </button>
                        <button onclick="switchTab('tab-forecast')" class="nav-btn w-full text-left px-3 py-2 text-[10px] font-mono uppercase tracking-wider text-slate-400 hover:bg-white/5 hover:text-cyan-400 rounded border border-transparent transition-all flex items-center gap-3" data-target="tab-forecast">
                            <i class="fa-solid fa-route w-4 text-center"></i> <span data-t="tab_forecast">Forecast Track</span>
                        </button>
                        <button onclick="switchTab('tab-obs')" class="nav-btn w-full text-left px-3 py-2 text-[10px] font-mono uppercase tracking-wider text-slate-400 hover:bg-white/5 hover:text-cyan-400 rounded border border-transparent transition-all flex items-center gap-3" data-target="tab-obs">
                            <i class="fa-solid fa-tower-cell w-4 text-center"></i> <span data-t="tab_obs">Observation Post</span>
                        </button>
                        <button onclick="switchTab('tab-icwc')" class="nav-btn w-full text-left px-3 py-2 text-[10px] font-mono uppercase tracking-wider text-slate-400 hover:bg-white/5 hover:text-cyan-400 rounded border border-transparent transition-all flex items-center gap-3" data-target="tab-icwc">
                            <i class="fa-solid fa-file-contract w-4 text-center"></i> <span data-t="tab_icwc">ICWC Products</span>
                        </button>
                        <button onclick="switchTab('tab-about')" class="nav-btn w-full text-left px-3 py-2 text-[10px] font-mono uppercase tracking-wider text-slate-400 hover:bg-white/5 hover:text-cyan-400 rounded border border-transparent transition-all flex items-center gap-3" data-target="tab-about">
                                <i class="fa-solid fa-heart w-4 text-center text-red-500"></i> <span data-t="tab_about">About & Credits</span>
                        </button>
                    </div>

                    <div class="flex-1 bg-black/20 p-8 overflow-y-auto custom-scrollbar relative">

                        <div id="tab-overview" class="tab-content space-y-6">
                            <div>
                                <h3 class="text-cyan-400 font-bold uppercase tracking-wider text-sm mb-4 border-l-4 border-cyan-500 pl-3" data-t="guide_core">Core Mechanics</h3>
                                <p class="text-xs text-slate-300 mb-2 leading-relaxed" data-t="guide_core_desc">Simulate cyclone genesis based on atmospheric fluid dynamics.</p>
                                <ul class="list-disc list-inside space-y-2 text-xs text-slate-400 marker:text-cyan-500">
                                    <li data-t="guide_c1">Click <strong class="text-white">INITIALIZE</strong> to generate a random disturbance.</li>
                                    <li data-t="guide_c2">Use <strong class="text-white">Settings</strong> to configure spawn points and environment.</li>
                                    <li data-t="guide_c3">SST (Sea Surface Temp) drives intensification.</li>
                                </ul>
                            </div>
                            <div>
                                <h3 class="text-emerald-400 font-bold uppercase tracking-wider text-sm mb-4 border-l-4 border-emerald-500 pl-3" data-t="guide_keys">Shortcuts</h3>
                                <div class="grid grid-cols-2 gap-4 text-xs font-mono bg-white/5 p-4 rounded border border-white/5">
                                    <div class="flex justify-between border-b border-white/5 pb-1"><span class="text-slate-500">SPACE</span><span class="text-white" data-t="key_space">Pause / Resume</span></div>
                                    <div class="flex justify-between border-b border-white/5 pb-1"><span class="text-slate-500">S</span><span class="text-white" data-t="key_s">Quick Restart</span></div>
                                    <div class="flex justify-between border-b border-white/5 pb-1"><span class="text-slate-500">V</span><span class="text-white" data-t="key_v">Hide/Show Panel</span></div>
                                    <div class="flex justify-between border-b border-white/5 pb-1"><span class="text-slate-500">1 / 2 / 3</span><span class="text-white">Speed Control</span></div>
                                    <div class="flex justify-between border-b border-white/5 pb-1"><span class="text-slate-500">F</span><span class="text-white"
                                        data-t="key_f">Show/Hide Intensity Profile</span></div>
                                    <div class="flex justify-between border-b border-white/5 pb-1"><span class="text-slate-500">R</span><span class="text-white" data-t="key_r">Show/Hide Post Radar (Base Reflectivity)</span></div>
                                    <div class="flex justify-between border-b border-white/5 pb-1"><span class="text-slate-500">D</span><span class="text-white" data-t="key_d">Show/Hide Post Radar (Radial Velocity)</span></div>
                                </div>
                            </div>
                        </div>

                        <div id="tab-radii" class="tab-content hidden space-y-6">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="w-12 h-12 bg-yellow-500/20 rounded flex items-center justify-center border border-yellow-500"><i class="fa-solid fa-bullseye text-2xl text-yellow-500"></i></div>
                                <div>
                                    <h3 class="text-xl font-bold text-white uppercase" data-t="detail_radii_title">Wind Radii Structure</h3>
                                    <p class="text-[10px] text-slate-500 font-mono">LAYER: STRUCTURAL ANALYSIS</p>
                                </div>
                            </div>
                            <p class="text-xs text-slate-300 leading-relaxed" data-t="detail_radii_desc">
                                Visualizes the extent of wind fields in four quadrants (NE, SE, SW, NW). Critical for determining the size and destructive potential of the system.
                            </p>
                            <div class="grid grid-cols-1 gap-3">
                                <div class="bg-red-900/20 p-3 border-l-2 border-red-500 flex justify-between items-center">
                                    <span class="text-xs font-bold text-red-400">64 KT (Hurricane Force)</span>
                                    <span class="text-[10px] text-slate-400" data-t="radii_64">Core destruction zone</span>
                                </div>
                                <div class="bg-orange-900/20 p-3 border-l-2 border-orange-500 flex justify-between items-center">
                                    <span class="text-xs font-bold text-orange-400">50 KT (Storm Force)</span>
                                    <span class="text-[10px] text-slate-400" data-t="radii_50">Severe weather zone</span>
                                </div>
                                <div class="bg-yellow-900/20 p-3 border-l-2 border-yellow-500 flex justify-between items-center">
                                    <span class="text-xs font-bold text-yellow-400">34 KT (Gale Force)</span>
                                    <span class="text-[10px] text-slate-400" data-t="radii_34">Outer circulation limit</span>
                                </div>
                            </div>
                        </div>

                        <div id="tab-pressure" class="tab-content hidden space-y-6">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="w-12 h-12 bg-blue-500/20 rounded flex items-center justify-center border border-blue-500"><i class="fa-solid fa-wind text-2xl text-blue-500"></i></div>
                                <div>
                                    <h3 class="text-xl font-bold text-white uppercase" data-t="detail_pres_title">Steering Flow (500hPa)</h3>
                                    <p class="text-[10px] text-slate-500 font-mono">LAYER: SYNOPTIC FORCING</p>
                                </div>
                            </div>
                            <p class="text-xs text-slate-300 leading-relaxed" data-t="detail_pres_desc">
                                The primary driver of cyclone movement. Cyclones move around High Pressure ridges (clockwise in N.Hemisphere) and towards Low Pressure troughs.
                            </p>
                            <div class="bg-white/5 p-4 rounded border border-white/10 mt-4">
                                <h4 class="text-xs font-bold text-amber-400 mb-2 uppercase" data-t="guide_god">Interactive Mode (God Mode)</h4>
                                <p class="text-xs text-slate-400 mb-2" data-t="guide_g2">Drag <strong class="text-blue-400">H</strong> and <strong class="text-red-400">L</strong> handles on the map to reshape the subtropical ridge and alter the storm's path in real-time. Also, double click the map to place a high pressure manually.</p>
                            </div>
                        </div>

                        <div id="tab-humidity" class="tab-content hidden space-y-6">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="w-12 h-12 bg-green-500/20 rounded flex items-center justify-center border border-green-500"><i class="fa-solid fa-droplet text-2xl text-green-500"></i></div>
                                <div>
                                    <h3 class="text-xl font-bold text-white uppercase" data-t="detail_hum_title">850mb Relative Humidity</h3>
                                    <p class="text-[10px] text-slate-500 font-mono">LAYER: THERMODYNAMICS</p>
                                </div>
                            </div>
                            <p class="text-xs text-slate-300 leading-relaxed" data-t="detail_hum_desc">
                                Indicates the moisture content available for the storm. Moisture is the fuel for convection.
                            </p>
                            <div class="grid grid-cols-2 gap-4 mt-2">
                                <div class="bg-black/40 p-3 border border-green-500/30 rounded">
                                    <div class="text-green-400 font-bold text-xs mb-1" data-t="hum_wet">Green Areas (>60%)</div>
                                    <p class="text-[10px] text-slate-400" data-t="hum_wet_desc">Favorable for development. Look for deep moisture wrapping marked as green on the humidity map.</p>
                                </div>
                                <div class="bg-black/40 p-3 border border-yellow-600/30 rounded">
                                    <div class="text-yellow-600 font-bold text-xs mb-1" data-t="hum_dry">Yellow/Brown Areas (>50%)</div>
                                    <p class="text-[10px] text-slate-400" data-t="hum_dry_desc">Dry Air Intrusion (SAL). Can choke the storm's convection and weaken the system.</p>
                                </div>
                                <div class="bg-black/40 p-3 border border-yellow-600/30 rounded">
                                    <div class="text-yellow-600 font-bold text-xs mb-1" data-t="foehn_effect">Foehn Effect</div>
                                    <p class="text-[10px] text-slate-400" data-t="foehn_effect_desc">When the moist airflow from a tropical cyclone crosses mountain ranges, it undergoes adiabatic warming during its descent on the leeward slope, forming dry and hot descending air currents that cause humidity to decrease.</p>
                                </div>
                            </div>
                        </div>

                        <div id="tab-wind" class="tab-content hidden space-y-6">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="w-12 h-12 bg-purple-500/20 rounded flex items-center justify-center border border-purple-500"><i class="fa-solid fa-right-left text-2xl text-purple-500"></i></div>
                                <div>
                                    <h3 class="text-xl font-bold text-white uppercase" data-t="detail_wind_title">100m Sustained Wind</h3>
                                    <p class="text-[10px] text-slate-500 font-mono">LAYER: BOUNDARY LAYER</p>
                                </div>
                            </div>
                             <p class="text-xs text-slate-300 leading-relaxed" data-t="detail_wind_desc">
                                A high-resolution vector field showing the immediate surface circulation. Useful for pinpointing the exact Low Level Circulation Center (LLCC).
                            </p>
                             <ul class="space-y-2 mt-2">
                                <li class="flex items-start gap-2 text-xs text-slate-400">
                                    <i class="fa-solid fa-arrow-right text-purple-400 mt-0.5"></i>
                                    <span data-t="wind_p1">Visualizes inflow angles and convergence.</span>
                                </li>
                                <li class="flex items-start gap-2 text-xs text-slate-400">
                                    <i class="fa-solid fa-arrow-right text-purple-400 mt-0.5"></i>
                                    <span data-t="wind_p2">Helps identify when a wave organizes into a closed circulation (Depression stage).</span>
                                </li>
                            </ul>
                             <div class="mt-4 p-3 bg-red-500/10 rounded border border-red-500/20 relative overflow-hidden group">
                                <i class="fa-solid fa-hurricane absolute -right-2 -bottom-2 text-4xl text-red-500/10 group-hover:text-red-500/20 transition-colors"></i>
                                
                                <div class="relative z-10">
                                    <div class="flex items-center gap-2 mb-1">
                                        <i class="fa-solid fa-triangle-exclamation text-red-400 text-xs"></i>
                                        <h4 class="text-xs font-bold text-red-400 uppercase tracking-wider" data-t="wind_danger_title">The Dangerous Semicircle</h4>
                                    </div>
                                    <p class="text-[10px] text-slate-400 leading-relaxed font-mono" data-t="wind_danger_desc">
                                        In the Northern Hemisphere, the right side of a moving cyclone has the strongest winds. This is where the rotational wind speed adds to the storm's forward motion speed (V_rot + V_motion).
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div id="tab-forecast" class="tab-content hidden space-y-6">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="w-12 h-12 bg-cyan-500/20 rounded flex items-center justify-center border border-cyan-500"><i class="fa-solid fa-route text-2xl text-cyan-500"></i></div>
                                <div>
                                    <h3 class="text-xl font-bold text-white uppercase" data-t="detail_fcst_title">Forecast Track</h3>
                                    <p class="text-[10px] text-slate-500 font-mono">LAYER: PREDICTION MODEL</p>
                                </div>
                            </div>
                            <p class="text-xs text-slate-300 leading-relaxed" data-t="detail_fcst_desc">
                                Projected path based on current steering flows and beta-drift calculations. Click any track point to show the projected path at the point, and you can generate a warning map!
                            </p>
                            <div class="space-y-3 mt-4">
                                <div class="flex gap-3 items-center">
                                    <div class="w-8 h-px bg-cyan-400 border-2 border-cyan-400 border-dashed"></div>
                                    <div class="flex-1">
                                        <h4 class="text-xs font-bold text-white" data-t="fcst_line">Center Line</h4>
                                        <p class="text-[10px] text-slate-500" data-t="fcst_line_desc">Most probable track. Not a guarantee.</p>
                                    </div>
                                </div>
                                <div class="flex gap-3 items-center">
                                    <div class="w-8 h-4 bg-cyan-500/20 border border-cyan-500/50 skew-x-12"></div>
                                    <div class="flex-1">
                                        <h4 class="text-xs font-bold text-white" data-t="fcst_cone">Cone of Uncertainty</h4>
                                        <p class="text-[10px] text-slate-500" data-t="fcst_cone_desc">The historical error margin. The center of the storm will remain within this cone 60-70% of the time. The storm can impact areas outside the cone.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="tab-obs" class="tab-content hidden space-y-6">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="w-12 h-12 bg-indigo-500/20 rounded flex items-center justify-center border border-indigo-500">
                                    <i class="fa-solid fa-tower-cell text-2xl text-indigo-500"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-white uppercase" data-t="detail_obs_title">Observation Post</h3>
                                    <p class="text-[10px] text-slate-500 font-mono">LAYER: GROUND TELEMETRY</p>
                                </div>
                            </div>
                            
                            <p class="text-xs text-slate-300 leading-relaxed" data-t="detail_obs_desc">
                                Deploy ground stations to gather localized telemetry. Essential for verifying satellite estimates and analyzing internal structure.
                            </p>

                            <div class="bg-white/5 p-3 border-l-2 border-indigo-500 mt-2 rounded-r">
                                <h4 class="text-xs font-bold text-indigo-400 mb-2 uppercase" data-t="obs_how_title">Deployment Strategy</h4>
                                <ul class="list-disc list-inside space-y-1 text-xs text-slate-400">
                                    <li data-t="obs_how_1">Open <strong class="text-white">Settings</strong> <i class="fa-solid fa-gear"></i> menu.</li>
                                    <li data-t="obs_how_2">Input Callsign (Name), Longitude, and Latitude to deploy.</li>
                                </ul>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mt-4">
                                <div class="bg-black/40 p-3 border border-white/10 rounded hover:border-indigo-500/50 transition-colors">
                                    <div class="flex items-center gap-2 mb-1">
                                        <i class="fa-solid fa-flag text-cyan-400 text-xs"></i>
                                        <span class="text-cyan-400 font-bold text-xs" data-t="obs_wind">10-Min Sustained Wind</span>
                                    </div>
                                    <p class="text-[10px] text-slate-400" data-t="obs_wind_desc">
                                        Standard meteorological measurement used by JMA. Smoothed data to filter out momentary gusts.
                                    </p>
                                </div>

                                <div class="bg-black/40 p-3 border border-white/10 rounded hover:border-indigo-500/50 transition-colors">
                                    <div class="flex items-center gap-2 mb-1">
                                        <i class="fa-solid fa-cloud-showers-heavy text-blue-400 text-xs"></i>
                                        <span class="text-blue-400 font-bold text-xs" data-t="obs_wx">Weather & Pressure</span>
                                    </div>
                                    <p class="text-[10px] text-slate-400" data-t="obs_wx_desc">
                                        Real-time Mean Sea Level Pressure (MSLP) and precipitation rate monitoring.
                                    </p>
                                </div>

                                <div class="bg-black/40 p-3 border border-white/10 rounded hover:border-indigo-500/50 transition-colors">
                                    <div class="flex items-center gap-2 mb-1">
                                        <i class="fa-solid fa-circle-notch text-green-400 text-xs"></i>
                                        <span class="text-green-400 font-bold text-xs" data-t="obs_rad_z">Base Reflectivity (Z)</span>
                                    </div>
                                    <p class="text-[10px] text-slate-400" data-t="obs_rad_z_desc">
                                        Rain intensity visualization. Use Shortcut <strong>[R]</strong> to toggle. Critical for analyzing spiral rainbands and eyewall structure.
                                    </p>
                                </div>

                                <div class="bg-black/40 p-3 border border-white/10 rounded hover:border-indigo-500/50 transition-colors">
                                    <div class="flex items-center gap-2 mb-1">
                                        <i class="fa-solid fa-fan text-red-400 text-xs"></i>
                                        <span class="text-red-400 font-bold text-xs" data-t="obs_rad_v">Radial Velocity (V)</span>
                                    </div>
                                    <p class="text-[10px] text-slate-400" data-t="obs_rad_v_desc">
                                        Doppler effect. Use Shortcut <strong>[D]</strong> to toggle.
                                        <span class="text-blue-400">Blue/Green</span> = Inbound,
                                        <span class="text-red-400">Red/Pink</span> = Outbound.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div id="tab-icwc" class="tab-content hidden space-y-6">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="w-12 h-12 bg-red-500/20 rounded flex items-center justify-center border border-red-500">
                                    <i class="fa-solid fa-file-contract text-2xl text-red-500"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-white uppercase" data-t="detail_icwc_title">ICWC Agency Products</h3>
                                    <p class="text-[10px] text-slate-500 font-mono">LAYER: ADVISORY GENERATION</p>
                                </div>
                            </div>
                            
                            <p class="text-xs text-slate-300 leading-relaxed" data-t="detail_icwc_desc">
                            The Independent Cyclone Warning Center (ICWC) is a tropical cyclone monitoring agency affiliated with STROM INC, providing tropical cyclone analysis and forecasting services worldwide. Accessible via the <strong>ICWC</strong> button when a track is selected.
                            </p>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                <div class="bg-black/40 p-4 border border-white/10 rounded hover:border-red-500/50 transition-colors group">
                                    <div class="flex items-center gap-2 mb-2">
                                        <i class="fa-solid fa-map text-red-400 text-xs group-hover:text-red-300"></i>
                                        <span class="text-red-400 font-bold text-xs group-hover:text-red-300" data-t="icwc_graphic">Warning Graphic</span>
                                    </div>
                                    <p class="text-[10px] text-slate-400 leading-relaxed" data-t="icwc_graphic_desc">
                                        Standard operational map showing past track, forecast cone, wind radii, and key city impacts.
                                    </p>
                                </div>

                                <div class="bg-black/40 p-4 border border-white/10 rounded hover:border-purple-500/50 transition-colors group">
                                    <div class="flex items-center gap-2 mb-2">
                                        <i class="fa-solid fa-percent text-purple-400 text-xs group-hover:text-purple-300"></i>
                                        <span class="text-purple-400 font-bold text-xs group-hover:text-purple-300" data-t="icwc_prob">Wind Speed Probability</span>
                                    </div>
                                    <p class="text-[10px] text-slate-400 leading-relaxed" data-t="icwc_prob_desc">
                                        Showing the cumulative probability of 34kt (Tropical Storm) or 64kt (Typhoon) winds at any location over the next 72 hours.
                                    </p>
                                </div>

                                <div class="bg-black/40 p-4 border border-white/10 rounded hover:border-indigo-500/50 transition-colors group md:col-span-2">
                                    <div class="flex items-center gap-2 mb-2">
                                        <i class="fa-solid fa-tower-broadcast text-indigo-400 text-xs group-hover:text-indigo-300"></i>
                                        <span class="text-indigo-400 font-bold text-xs group-hover:text-indigo-300" data-t="icwc_station">Station Observations</span>
                                    </div>
                                    <p class="text-[10px] text-slate-400 leading-relaxed" data-t="icwc_station_desc">
                                        Retrieves historical telemetry logs for a specific time step. visualizes localized wind barbs, MSLP trends, and weather conditions relative to the storm's position.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div id="tab-about" class="tab-content hidden h-full flex flex-col items-center justify-center text-center space-y-8">
                                    <div class="relative group">
                                        <div class="absolute -inset-1 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full blur opacity-20 group-hover:opacity-50 transition duration-1000"></div>
                                        <div class="relative w-64 md:w-80">
                                            <img src="a.png" alt="Cat" class="w-full h-auto drop-shadow-2xl hover:scale-105 transition-transform duration-500 cursor-pointer" title="Meow!">
                                        </div>
                                    </div>

                                    <div class="space-y-4 max-w-lg">
                                        <h2 class="text-3xl md:text-4xl font-black text-white tracking-tighter leading-tight drop-shadow-lg">
                                            Thank you for visiting!
                                        </h2>
                                        <div class="h-1 w-24 bg-cyan-500 mx-auto rounded-full"></div>
                                        <p class="text-xl font-mono font-bold text-cyan-400 tracking-widest uppercase">
                                            - TYBoard @ECD
                                        </p>
                                        <p class="text-xs text-slate-500 pt-8 font-mono">
                                            STROM_INC | BUILD 2026
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="p-2 border-t border-white/10 bg-black/50 text-[9px] text-center text-slate-600 font-mono flex-shrink-0">
                    STROM_INC | BUILD 2026
                </div>
            </div>
        </div>
    
    <!-- æ‹–æ‹½é€»è¾‘è„šæœ¬ -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // ä½¿å…ƒç´ å¯æ‹–æ‹½çš„å‡½æ•°
            function makeDraggable(elementId) {
                const element = document.getElementById(elementId);
                if (!element) return;

                let isDragging = false;
                let currentX;
                let currentY;
                let initialX;
                let initialY;
                let xOffset = 0;
                let yOffset = 0;

                // ç»Ÿä¸€ç›‘å¬çˆ¶å…ƒç´ ï¼Œä½†é€šè¿‡ target åˆ¤æ–­æ˜¯å¦æ˜¯æ‰‹æŸ„åŒºåŸŸï¼ˆå¦‚æœéœ€è¦æ›´ç²¾ç¡®æ§åˆ¶ï¼‰
                // è¿™é‡Œä¸ºäº†ä½“éªŒæµç•…ï¼Œå…è®¸æ•´ä¸ªå®¹å™¨æ‹–æ‹½ï¼Œä½†æ’é™¤äº† Input/Button
                element.addEventListener("mousedown", dragStart);
                element.addEventListener("touchstart", dragStart, { passive: false });

                function dragStart(e) {
                    // å…è®¸ç‚¹å‡»å­å…ƒç´ ï¼ˆä¾‹å¦‚æŒ‰é’®ï¼‰ï¼Œä¸è§¦å‘æ‹–æ‹½
                    if (e.target.tagName === 'BUTTON' || e.target.tagName === 'INPUT' || e.target.tagName === 'SELECT' || e.target.tagName === 'TEXTAREA' || e.target.closest('button')) return;
                    
                    // å¦‚æœç‚¹å‡»çš„æ˜¯å›¾è¡¨å†…å®¹æœ¬èº«(SVG)ï¼Œå…è®¸æ‹–æ‹½ï¼Œä½†å¦‚æœæ˜¯äº¤äº’å…ƒç´ åˆ™éœ€å°å¿ƒ
                    // æ­¤å¤„é»˜è®¤å…è®¸

                    let clientX, clientY;
                    if (e.type === "touchstart") {
                        clientX = e.touches[0].clientX;
                        clientY = e.touches[0].clientY;
                    } else {
                        clientX = e.clientX;
                        clientY = e.clientY;
                    }

                    // è®°å½•åˆå§‹ç‚¹å‡»ä½ç½®
                    if (element.style.transform.includes('translate')) {
                         // å·²ç»æ˜¯ translate çŠ¶æ€ï¼Œç›´æ¥åŸºäºå½“å‰ä½ç½®è®¡ç®—
                    } else {
                         // ç¬¬ä¸€æ¬¡æ‹–æ‹½ï¼Œå¤„ç†å±…ä¸­å®šä½çš„è½¬æ¢
                         const rect = element.getBoundingClientRect();
                         element.style.transform = 'none';
                         element.style.left = rect.left + 'px';
                         element.style.top = rect.top + 'px';
                         // ç§»é™¤ transform åï¼Œoffset å½’é›¶
                         xOffset = 0;
                         yOffset = 0;
                    }

                    initialX = clientX - xOffset;
                    initialY = clientY - yOffset;

                    isDragging = true;
                    element.classList.add('draggable-active');
                }

                function drag(e) {
                    if (isDragging) {
                        e.preventDefault();
                        
                        let clientX, clientY;
                        if (e.type === "touchmove") {
                            clientX = e.touches[0].clientX;
                            clientY = e.touches[0].clientY;
                        } else {
                            clientX = e.clientX;
                            clientY = e.clientY;
                        }

                        currentX = clientX - initialX;
                        currentY = clientY - initialY;

                        xOffset = currentX;
                        yOffset = currentY;

                        setTranslate(currentX, currentY, element);
                    }
                }

                function setTranslate(xPos, yPos, el) {
                    el.style.transform = "translate3d(" + xPos + "px, " + yPos + "px, 0)";
                }

                function dragEnd(e) {
                    if (!isDragging) return;
                    initialX = currentX;
                    initialY = currentY;
                    isDragging = false;
                    element.classList.remove('draggable-active');
                }

                // ç»‘å®šåˆ° document ä»¥é˜²æ­¢é¼ æ ‡ç§»å‡ºå…ƒç´ åå¤±æ•ˆ
                document.addEventListener("mousemove", drag);
                document.addEventListener("mouseup", dragEnd);
                
                document.addEventListener("touchmove", drag, { passive: false });
                document.addEventListener("touchend", dragEnd);
            }

            // åˆå§‹åŒ–æ‹–æ‹½
            makeDraggable("map-info-box");
            makeDraggable("intensity-chart-section");
        });
    </script>

    <!-- [æ–°å¢] å«æ˜Ÿäº‘å›¾é¢æ¿æŠ˜å é€»è¾‘ -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const satWindow = document.getElementById('satellite-window');
            const closeBtn = document.getElementById('close-sat-btn');
            const restoreBtn = document.getElementById('restore-sat-btn');

            if (closeBtn && satWindow && restoreBtn) {
                closeBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    satWindow.classList.add('hidden');
                    restoreBtn.classList.remove('hidden');
                });

                restoreBtn.addEventListener('click', () => {
                    restoreBtn.classList.add('hidden');
                    satWindow.classList.remove('hidden');
                });
            }
        });
    </script>

    <!-- [æ–°å¢] å¤šè¯­è¨€æ”¯æŒè„šæœ¬ -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const langButton = document.getElementById('langButton');
            let currentLang = 'EN'; // é»˜è®¤ä¸ºè‹±æ–‡ï¼Œä¸HTMLé™æ€å†…å®¹ä¸€è‡´

            const translations = {
                'EN': {
                    'config': 'Configuration',
                    'global_temp': 'Global Temp',
                    'shear': 'Vertical Shear',
                    'obs_post': 'Observation Post',
                    'force_spawn': 'Force Spawn',
                    'track_nodes': 'Show Track Nodes',
                    'irbw': 'IR / Enhanced',
                    'track_select': 'SELECT TRACK',
                    'sat_feed': 'SAT_FEED_LIVE',
                    'await_init': 'Awaiting Initialization...',
                    'wind_spd': 'Wind Spd',
                    'pressure': 'Pressure',
                    'ace_index': 'ACE Index:',
                    'atcf_stream': 'ATCF DATA STREAM',
                    'copy': 'COPY',
                    'export_img': 'EXPORT IMG',
                    'initialize': '<i class="fa-solid fa-power-off"></i> INITIALIZE',
                    'intensity_profile': 'Intensity Profile',
                    'sim_logs': '<i class="fa-solid fa-database mr-2 text-cyan-500"></i>Simulation Logs',
                    'raw_atcf': 'Raw ATCF Data',
                    'download_log': 'Download Log (.txt)',
                    'drag': 'DRAG',
                    'guide_title': 'Operational Manual',
                    'tab_overview': 'Overview',
                    'nav_layers': 'Data Layers',
                    'tab_radii': 'Wind Radii',
                    'tab_pressure': 'Steering Flow',
                    'tab_humidity': '850mb Humidity',
                    'tab_wind': 'Low Level Wind',
                    'tab_forecast': 'Forecast Track',
                    
                    'guide_core': 'Core Mechanics',
                    'guide_core_desc': 'Simulate cyclone genesis based on atmospheric fluid dynamics.',
                    'guide_c1': 'Click <strong>INITIALIZE</strong> to spawn a disturbance.',
                    'guide_c2': 'Use <strong>Settings</strong> to configure spawn points.',
                    'guide_c3': 'SST (Sea Surface Temp) drives intensification.',
                    
                    'guide_keys': 'Shortcuts',
                    'key_space': 'Pause / Resume',
                    'key_s': 'Quick Restart',
                    'key_v': 'Hide / Show Panel',
                    'key_f': 'Show/Hide Intensity Profile',
                    'key_r': 'Post Radar (Base Reflectivity)',
                    'key_d': 'Post Radar (Radial Velocity)',
                    
                    'detail_radii_title': 'Wind Radii Structure',
                    'detail_radii_desc': 'Visualizes the extent of wind fields in four quadrants. Critical for determining destructive potential.',
                    'radii_64': 'Hurricane Warning zone',
                    'radii_50': 'Storm Warning Zone',
                    'radii_34': 'Gale Warning Zone',
                    
                    'detail_pres_title': 'Steering Flow (500hPa)',
                    'detail_pres_desc': 'The primary driver of movement. Cyclones follow the edge of High Pressure ridges.',
                    'guide_god': 'Interactive God Mode',
                    'guide_g2': 'Drag H/L handles to reshape the ridge and alter the path. Also, double click the map to place a high pressure manually.',
                    
                    'detail_hum_title': '850mb Relative Humidity',
                    'detail_hum_desc': 'Moisture availability. Moisture is fuel for convection.',
                    'hum_wet': 'Green Areas (>70%)',
                    'hum_wet_desc': 'Favorable. Look for deep moisture wrapping marked as green on the humidity map.',
                    'hum_dry': 'Yellow/Brown Areas (<50%)',
                    'hum_dry_desc': 'Dry Air Intrusion. Chokes convection and weakens the storm.',
                    'foehn_effect': 'Foehn Effect',
                    'foehn_effect_desc': 'When the moist airflow from a tropical cyclone crosses mountain ranges, it undergoes adiabatic warming during its descent on the leeward slope, forming dry and hot descending air currents that cause humidity to decrease.',
                    
                    'detail_wind_title': '100m Sustained Wind',
                    'detail_wind_desc': 'High-resolution vector field showing surface circulation.',
                    'wind_p1': 'Visualizes inflow and convergence.',
                    'wind_p2': 'Identifies closed circulation (LLCC).',
                    'wind_danger_title': 'THE DANGEROUS SEMICIRCLE',
                    'wind_danger_desc': 'In the Northern Hemisphere, the right-front quadrant is strongest because the rotation vector aligns with the forward motion vector (V_rot + V_motion). Conversely, they oppose each other in the left "Navigable Semicircle".',
                    
                    'detail_fcst_title': 'Forecast Track',
                    'detail_fcst_desc': 'Projected path based on current steering flows and beta-drift.',
                    'fcst_line': 'Center Line',
                    'fcst_line_desc': 'Most probable track.',
                    'fcst_cone': 'Cone of Uncertainty',
                    'fcst_cone_desc': 'Historical error margin. Storm center stays within cone 60-70% of the time.',
                    'tab_obs': 'Observation Post',
                    'detail_obs_title': 'Observation Post',
                    'detail_obs_desc': 'Deploy ground stations to gather localized telemetry. Essential for verifying satellite estimates and analyzing internal structure.',
                    'obs_how_title': 'Deployment Strategy',
                    'obs_how_1': 'Open <strong>Settings</strong> <i class="fa-solid fa-gear"></i> menu.',
                    'obs_how_2': 'Input Callsign (Name), Longitude, and Latitude to deploy.',
                    'obs_wind': '10-Min Sustained Wind',
                    'obs_wind_desc': 'Standard meteorological measurement used by JMA. Smoothed data to filter out momentary gusts.',
                    'obs_wx': 'Weather & Pressure',
                    'obs_wx_desc': 'Real-time Mean Sea Level Pressure (MSLP) and precipitation rate monitoring.',
                    'obs_rad_z': 'Base Reflectivity (Z)',
                    'obs_rad_z_desc': 'Rain intensity visualization. Use Shortcut <strong>[R]</strong> to toggle. Critical for analyzing spiral rainbands and eyewall structure.',
                    'obs_rad_v': 'Radial Velocity (V)',
                    'obs_rad_v_desc': 'Doppler effect. Use Shortcut <strong>[D]</strong> to toggle. <span class="text-blue-400">Blue/Green</span> = Inbound, <span class="text-red-400">Red/Pink</span> = Outbound.',
                    'tab_icwc': 'ICWC Products',
                    'detail_icwc_title': 'ICWC Agency Products',
                    'detail_icwc_desc': 'The Independent Cyclone Warning Center (ICWC) is a tropical cyclone monitoring agency affiliated with STROM INC, providing tropical cyclone analysis and forecasting services worldwide. Accessible via the <strong>ICWC</strong> button when a track is selected.',
                    'icwc_graphic': 'Warning Graphic',
                    'icwc_graphic_desc': 'Standard operational map showing past track, forecast cone, wind radii, and key city impacts.',
                    'icwc_prob': 'Wind Speed Probability',
                    'icwc_prob_desc': 'Showing the cumulative probability of 34kt (Tropical Storm) or 64kt (Typhoon) winds at any location over the next 72 hours.',
                    'icwc_station': 'Station Observations',
                    'icwc_station_desc': 'Retrieves historical telemetry logs for a specific time step. Visualizes localized wind barbs, MSLP trends, and weather conditions relative to the storm position.'
                },
                'CN': {
                    'config': 'ç³»ç»Ÿé…ç½®',
                    'global_temp': 'å…¨çƒæ°”æ¸©',
                    'shear': 'å‚ç›´é£åˆ‡å˜',
                    'obs_post': 'è§‚æµ‹ç«™ç‚¹',
                    'force_spawn': 'å¼ºåˆ¶ç”Ÿæˆ',
                    'track_nodes': 'æ˜¾ç¤ºè·¯å¾„èŠ‚ç‚¹',
                    'irbw': 'IR/å¢å¼º',
                    'track_select': 'é€‰æ‹©æ›²ç›®',
                    'sat_feed': 'å«æ˜Ÿå®æ—¶å›ä¼ ',
                    'await_init': 'ç­‰å¾…å¯åŠ¨...',
                    'wind_spd': 'æœ€å¤§é£é€Ÿ',
                    'pressure': 'ä¸­å¿ƒæ°”å‹',
                    'ace_index': 'ACEæŒ‡æ•°:',
                    'atcf_stream': 'ATCF æ•°æ®æµ',
                    'copy': 'å¤åˆ¶æ•°æ®',
                    'export_img': 'å¯¼å‡ºå›¾åƒ',
                    'initialize': '<i class="fa-solid fa-power-off"></i> ç³»ç»Ÿå¯åŠ¨',
                    'intensity_profile': 'å¼ºåº¦å˜åŒ–æ›²çº¿',
                    'sim_logs': '<i class="fa-solid fa-database mr-2 text-cyan-500"></i>æ¨¡æ‹Ÿè®°å½•æ—¥å¿—',
                    'raw_atcf': 'åŸå§‹ ATCF æ•°æ®',
                    'download_log': 'ä¸‹è½½æ—¥å¿— (.txt)',
                    'drag': 'æ‹–æ‹½',
                    'guide_title': 'æ“ä½œè¯´æ˜ä¹¦',
                    'tab_overview': 'ç³»ç»Ÿæ¦‚è§ˆ',
                    'nav_layers': 'æ•°æ®å›¾å±‚è§£æ',
                    'tab_radii': 'é£åœˆç»“æ„',
                    'tab_pressure': 'å¼•å¯¼æ°”æµ',
                    'tab_humidity': '850mb æ¹¿åº¦',
                    'tab_wind': 'åº•å±‚é£åœº',
                    'tab_forecast': 'é¢„æµ‹è·¯å¾„',
                    
                    'guide_core': 'æ ¸å¿ƒæœºåˆ¶',
                    'guide_core_desc': 'åŸºäºå¤§æ°”æµä½“åŠ›å­¦æ¨¡æ‹Ÿæ°”æ—‹ç”Ÿæˆã€‚',
                    'guide_c1': 'ç‚¹å‡» <strong>ç³»ç»Ÿå¯åŠ¨</strong> ç”Ÿæˆæ‰°åŠ¨ã€‚',
                    'guide_c2': 'ä½¿ç”¨ <strong>è®¾ç½®</strong> é…ç½®ç”Ÿæˆç‚¹ã€‚',
                    'guide_c3': 'SST (æµ·æ¸©) æ˜¯å¼ºåº¦å‘å±•çš„åŠ¨åŠ›ã€‚',
                    
                    'guide_keys': 'å¿«æ·é”®',
                    'key_space': 'æš‚åœ / ç»§ç»­',
                    'key_s': 'å¿«é€Ÿé‡å¯',
                    'key_v': 'éšè— / æ˜¾ç¤ºé¢æ¿',
                    'key_f': 'éšè— / æ˜¾ç¤ºå¼ºåº¦æ›²çº¿',
                    'key_r': 'æ˜¾ç¤º / éšè—ç«™ç‚¹é›·è¾¾ï¼ˆåŸºç¡€åå°„ç‡ï¼‰',
                    'key_d': 'æ˜¾ç¤º / éšè—ç«™ç‚¹é›·è¾¾ï¼ˆå¤šæ™®å‹’å¾„å‘é€Ÿåº¦ï¼‰',
                    
                    'detail_radii_title': 'é£åœˆç»“æ„åˆ†æ',
                    'detail_radii_desc': 'æ˜¾ç¤ºæ°”æ—‹å››è±¡é™çš„é£åŠ›èŒƒå›´ã€‚å¯¹äºåˆ¤æ–­ç ´ååŠ›å’Œé£æš´å°ºåº¦è‡³å…³é‡è¦ã€‚',
                    'radii_64': 'é£“é£è­¦æŠ¥åŒº (12çº§+)',
                    'radii_50': 'æš´é£è­¦æŠ¥åŒº (10çº§+)',
                    'radii_34': 'çƒˆé£è­¦æŠ¥åŒº (8çº§+)',
                    
                    'detail_pres_title': '500hPa å±‚é¢å¼•å¯¼æ°”æµ',
                    'detail_pres_desc': 'æ°”æ—‹ç§»åŠ¨çš„ä¸»è¦é©±åŠ¨åŠ›ã€‚æ°”æ—‹é€šå¸¸æ²¿ç€å‰¯çƒ­å¸¦é«˜å‹(High)çš„è¾¹ç¼˜ç§»åŠ¨ï¼Œå¹¶è¢«ä½å‹æ§½(Low)å¸å¼•ã€‚',
                    'guide_god': 'ä¸Šå¸æ¨¡å¼ (äº¤äº’)',
                    'guide_g2': 'æ‹–æ‹½åœ°å›¾ä¸Šçš„ H/L æ‰‹æŸ„æ¥æ”¹å˜å‰¯é«˜å½¢æ€ï¼Œå®æ—¶ä¿®æ­£å°é£è·¯å¾„ã€‚æ­¤å¤–ï¼ŒåŒå‡»åœ°å›¾å¯äººä¸ºæ·»åŠ ä¸€ä¸ªå‰¯é«˜å•ä½“ã€‚',
                    
                    'detail_hum_title': '850mb ç›¸å¯¹æ¹¿åº¦',
                    'detail_hum_desc': 'æ˜¾ç¤ºå¤§æ°”æ°´æ±½å«é‡ã€‚æ°´æ±½æ˜¯æ·±å¯¹æµçˆ†å‘çš„ç‡ƒæ–™ã€‚',
                    'hum_wet': 'ç»¿è‰²åŒºåŸŸ (>70%)',
                    'hum_wet_desc': 'æœ‰åˆ©äºå‘å±•ã€‚è§‚å¯Ÿæ ¸å¿ƒæ˜¯å¦è¢«æ·±åšæ°´æ±½ï¼ˆåœ¨ç­‰æ¹¿åº¦çº¿å›¾ä¸Šç”¨ç»¿è‰²å®å¿ƒè¡¨ç¤ºï¼‰åŒ…è£¹ã€‚',
                    'hum_dry': 'é»„/æ£•è‰²åŒºåŸŸ',
                    'hum_dry_desc': 'å¹²ç©ºæ°”å…¥ä¾µ (SAL)ã€‚ä¼šåˆ‡æ–­æ°´æ±½ä¾›åº”ï¼ŒæŠ‘åˆ¶å¯¹æµå¹¶å¯¼è‡´æ°”æ—‹å‡å¼±ã€‚',
                    'foehn_effect': 'ç„šé£æ•ˆåº”',
                    'foehn_effect_desc': 'çƒ­å¸¦æ°”æ—‹çš„æ¹¿æ¶¦æ°”æµè¶Šè¿‡å±±è„‰åï¼Œåœ¨èƒŒé£å¡ä¸‹æ²‰è¿‡ç¨‹ä¸­å› ç»çƒ­å¢æ¸©ï¼Œå½¢æˆåˆå¹²åˆçƒ­çš„ä¸‹æ²‰æ°”æµï¼Œå¯¼è‡´æ¹¿åº¦æ€¥å‰§ä¸‹é™ã€‚',
                    
                    'detail_wind_title': '100m æŒç»­é£åœº',
                    'detail_wind_desc': 'é«˜åˆ†è¾¨ç‡çŸ¢é‡åœºï¼Œæ˜¾ç¤ºè¿‘åœ°é¢çš„å®é™…ç©ºæ°”æµåŠ¨ã€‚',
                    'wind_p1': 'å¯è§†åŒ–æ°”æµçš„æµå…¥è§’åº¦ä¸è¾åˆæƒ…å†µã€‚',
                    'wind_p2': 'ç”¨äºè¯†åˆ«æ³¢åŠ¨ä½•æ—¶æ„å»ºå‡ºé—­åˆç¯æµ (LLCC)ã€‚',
                    'wind_danger_title': 'å±é™©åŠåœ† (Dangerous Semicircle)',
                    'wind_danger_desc': 'åœ¨åŒ—åŠçƒï¼Œæ°”æ—‹å³å‰è±¡é™çš„é£é€Ÿæœ€å¼ºï¼ˆèˆªæµ·ä¸­ç§°ä¸ºå±é™©åŠåœ†ï¼‰ã€‚è¿™æ˜¯å› ä¸ºæ°”æ—‹çš„é€†æ—¶é’ˆæ—‹è½¬é€Ÿåº¦ä¸å‘å‰çš„ç§»åŠ¨é€Ÿåº¦åœ¨è¯¥åŒºåŸŸæ–¹å‘ä¸€è‡´ï¼Œå‘ç”ŸçŸ¢é‡å åŠ  (V_rot + V_motion)ã€‚',
                    
                    'detail_fcst_title': 'è·¯å¾„é¢„æµ‹æ¨¡å‹',
                    'detail_fcst_desc': 'åŸºäºå½“å‰å¼•å¯¼æ°”æµå’Œ Beta æ¼‚ç§»æ•ˆåº”å®æ—¶è®¡ç®—çš„é¢„è®¡è½¨è¿¹ã€‚ç‚¹å‡»ä»»æ„å†å²è·¯å¾„ç‚¹æŸ¥çœ‹å½“æ—¶çš„è·¯å¾„é¢„æµ‹ï¼Œå¹¶ç”Ÿæˆè­¦å‘Šåœ°å›¾ï¼',
                    'fcst_line': 'ä¸­å¿ƒè·¯å¾„',
                    'fcst_line_desc': 'æ¦‚ç‡æœ€é«˜çš„è·¯å¾„ï¼Œä½†å¹¶éç»å¯¹è·¯å¾„ã€‚',
                    'fcst_cone': 'ä¸ç¡®å®šæ€§é”¥ (æ¦‚ç‡åœ†)',
                    'fcst_cone_desc': 'å†å²è¯¯å·®èŒƒå›´ã€‚æ°”æ—‹ä¸­å¿ƒæœ‰ 60-70% çš„æ¦‚ç‡è½åœ¨é”¥å†…ã€‚æ³¨æ„ï¼šé”¥å¤–åœ°åŒºä»å¯èƒ½å—ç¾ã€‚',
                    'tab_obs': 'è§‚æµ‹ç«™ç‚¹',
                    'detail_obs_title': 'åœ°é¢è§‚æµ‹ç«™',
                    'detail_obs_desc': 'éƒ¨ç½²åœ°é¢ç«™ç‚¹ä»¥æ”¶é›†å±€éƒ¨é¥æµ‹æ•°æ®ã€‚å¯¹äºéªŒè¯å«æ˜Ÿä¼°ç®—å¼ºåº¦å’Œåˆ†æå†…éƒ¨ç»“æ„è‡³å…³é‡è¦ã€‚',
                    'obs_how_title': 'éƒ¨ç½²æ–¹æ³•',
                    'obs_how_1': 'æ‰“å¼€ <strong>ç³»ç»Ÿé…ç½®</strong> <i class="fa-solid fa-gear"></i> èœå•ã€‚',
                    'obs_how_2': 'åœ¨â€œè§‚æµ‹ç«™ç‚¹â€æ è¾“å…¥å‘¼å·ã€ç»åº¦å’Œçº¬åº¦è¿›è¡Œéƒ¨ç½²ã€‚',
                    'obs_wind': 'ååˆ†é’ŸæŒç»­é£é€Ÿ',
                    'obs_wind_desc': 'å›½é™…é€šç”¨çš„æ°”è±¡æµ‹é‡æ ‡å‡†ã€‚æ•°æ®ç»è¿‡å¹³æ»‘å¤„ç†ä»¥è¿‡æ»¤é˜µé£å¹²æ‰°ã€‚',
                    'obs_wx': 'å¤©æ°”çŠ¶å†µ',
                    'obs_wx_desc': 'å®æ—¶ç›‘æµ‹å¤©æ°”çŠ¶æ€ã€‚',
                    'obs_rad_z': 'é›·è¾¾ï¼šåŸºç¡€åå°„ç‡ (Z)',
                    'obs_rad_z_desc': 'é™æ°´å¼ºåº¦å¯è§†åŒ–ã€‚å¿«æ·é”® <strong>[R]</strong> åˆ‡æ¢ã€‚ç”¨äºåˆ†æèºæ—‹é›¨å¸¦å’Œçœ¼å¢™ç»“æ„ã€‚',
                    'obs_rad_v': 'é›·è¾¾ï¼šå¾„å‘é€Ÿåº¦ (V)',
                    'obs_rad_v_desc': 'å¤šæ™®å‹’æ•ˆåº”ç›‘æµ‹ã€‚å¿«æ·é”® <strong>[D]</strong> åˆ‡æ¢ã€‚<span class="text-blue-400">è“/ç»¿</span> ä¸ºç§»å‘é›·è¾¾(Inbound)ï¼Œ<span class="text-red-400">çº¢/ç²‰</span> ä¸ºè¿œç¦»é›·è¾¾(Outbound)ã€‚',
                    'tab_icwc': 'ICWC é¢„æŠ¥äº§å“',
                    'detail_icwc_title': 'ICWC æœºæ„äº§å“',
                    'detail_icwc_desc': 'ç‹¬ç«‹æ°”æ—‹é¢„è­¦ä¸­å¿ƒ (ICWC) æˆç«‹äº1145å¹´1æœˆ4æ—¥ï¼Œæ˜¯éš¶å±äºSTROM INCçš„çƒ­å¸¦æ°”æ—‹ç›‘æµ‹æœºæ„ï¼Œä¸ºå…¨çƒæä¾›çƒ­å¸¦æ°”æ—‹åˆ†æå’Œé¢„æŠ¥æœåŠ¡ã€‚é€‰ä¸­ä»»æ„è·¯å¾„ç‚¹åç‚¹å‡»åº•éƒ¨ <strong>ICWC</strong> æŒ‰é’®å³å¯è®¿é—®ã€‚',
                    'icwc_graphic': 'è­¦æŠ¥å›¾ (Warning Graphic)',
                    'icwc_graphic_desc': 'æ ‡å‡†ä½œä¸šåœ°å›¾ï¼Œæ˜¾ç¤ºå†å²è·¯å¾„ã€é¢„æµ‹é”¥ï¼ˆæ¦‚ç‡åœ†ï¼‰ã€é£åœˆå¤§å°åŠå¯¹ä¸»è¦åŸå¸‚çš„å½±å“ã€‚',
                    'icwc_prob': 'é£é€Ÿæ¦‚ç‡ (Wind Prob)',
                    'icwc_prob_desc': 'è®¡ç®—æœªæ¥ 72 å°æ—¶å†…ä»»æ„åœ°ç‚¹é­é‡ 34kt (çƒ­å¸¦é£æš´çº§) æˆ– 64kt (å°é£çº§) å¤§é£çš„ç´¯ç§¯æ¦‚ç‡ã€‚',
                    'icwc_station': 'ç«™ç‚¹è§‚æµ‹è®°å½• (Station Obs)',
                    'icwc_station_desc': 'æ£€ç´¢ç‰¹å®šæ—¶é—´æ­¥é•¿çš„å†å²é¥æµ‹æ—¥å¿—ã€‚å¯è§†åŒ–ç«™ç‚¹å½“æ—¶çš„é£ç¾½ã€æµ·å¹³é¢æ°”å‹è¶‹åŠ¿ä»¥åŠç›¸å¯¹äºé£æš´ä½ç½®çš„å¤©æ°”çŠ¶å†µã€‚'
                }
            };

            // åŠ¨æ€å†…å®¹æ˜ å°„è¡¨ (JS ç”Ÿæˆçš„ä¸­æ–‡ -> è‹±æ–‡)
            const dynamicTranslations = {
                "ç”Ÿæˆ": "START",
                "æš‚åœ": "PAUSE",
                "ç»§ç»­": "RESUME",
                "æ¨¡æ‹Ÿè¿›è¡Œä¸­...": "SIMULATION ACTIVE...",
                "æ¨¡æ‹Ÿæ—¶é—´: ": "SIM ",
                "æ¨¡æ‹Ÿç»“æŸ": "SIMULATION ENDED",
                "æ¨¡æ‹Ÿå·²æš‚åœ": "SIMULATION PAUSED",
                "å¤åˆ¶æ•°æ®": "COPY DATA",
                "å·²å¤åˆ¶!": "COPIED!",
                "çƒ­å¸¦ä½å‹": "TD",
                "çƒ­å¸¦é£æš´": "TS",
                "å°é£": "Typhoon",
                "å¼ºå°é£": "Severe Typhoon",
                "è¶…å¼ºå°é£": "Super Typhoon",
                "1çº§é£“é£": "Cat 1 Hurricane",
                "2çº§é£“é£": "Cat 2 Hurricane",
                "3çº§é£“é£ (å¼º)": "Cat 3 Hurricane",
                "4çº§é£“é£ (å¼º)": "Cat 4 Hurricane",
                "5çº§é£“é£ (å·¨)": "Cat 5 Hurricane",
                "ä½å‹åŒº": "LPA",
                "å‰¯çƒ­å¸¦ä½å‹": "Subtropical Depression",
                "å‰¯çƒ­å¸¦é£æš´": "Subtropical Storm",
                "æ¸©å¸¦æ°”æ—‹": "Extratropical",
                "æ­£åœ¨æ¸©å¸¦è½¬åŒ–": "Extratropical Transition"
            };

            function updateStaticText() {
                document.querySelectorAll('[data-t]').forEach(el => {
                    const key = el.getAttribute('data-t');
                    if (translations[currentLang][key]) {
                        el.innerHTML = translations[currentLang][key];
                    }
                });
                
                // æ›´æ–° placeholder
                const siteNameInput = document.getElementById('siteNameInput');
                if (siteNameInput) {
                    siteNameInput.placeholder = currentLang === 'EN' ? "SITE CALLSIGN" : "ç«™ç‚¹å‘¼å·";
                }
                
                langButton.textContent = currentLang === 'EN' ? "EN" : "CN";
                localStorage.setItem('userLanguage', currentLang); // [ä¿®å¤] ä½¿ç”¨æ­£ç¡®çš„å˜é‡å currentLang
            }

            langButton.addEventListener('click', () => {
                currentLang = currentLang === 'EN' ? 'CN' : 'EN';
                updateStaticText();
                // è§¦å‘ä¸€æ¬¡åŠ¨æ€æ£€æŸ¥ä»¥ç«‹å³æ›´æ–°å½“å‰çŠ¶æ€æ–‡æœ¬
                // å¼ºåˆ¶æ›´æ–°ç‰¹æ®ŠæŒ‰é’®çš„æ–‡æœ¬
                const generateBtn = document.getElementById('generateButton');
                if (generateBtn) {
                    if (currentLang === 'EN') {
                        generateBtn.innerHTML = `<span class="relative z-10 flex items-center justify-center gap-2"><i class="fa-solid fa-power-off"></i> START</span>`;
                    } else {
                        generateBtn.innerHTML = `<span class="relative z-10 flex items-center justify-center gap-2"><i class="fa-solid fa-power-off"></i> ç³»ç»Ÿå¯åŠ¨</span>`;
                    }
                }
                checkDynamicText();
            });

            const targetNodes = [
                document.getElementById('status'),
                document.getElementById('category'),
                document.getElementById('generateButton'), // æŒ‰é’®æ–‡æœ¬ä¼šè¢«æ›¿æ¢
                document.getElementById('pauseButton'),
                document.getElementById('copy-track-button'),
                document.getElementById('simulationTime')
            ];

            const observerConfig = { childList: true, characterData: true, subtree: true };

            const observer = new MutationObserver((mutations) => {
                if (currentLang === 'CN') return; // ä¸­æ–‡æ¨¡å¼ä¸‹ä¸æ‹¦æˆªï¼Œç›´æ¥æ˜¾ç¤º JS åŸæ–‡

                mutations.forEach((mutation) => {
                    const node = mutation.target;
                    
                    // 1. å¤„ç†çº¯æ–‡æœ¬èŠ‚ç‚¹æ›´æ–°
                    if (node.nodeType === 3) { // Text node
                        const text = node.textContent;
                        // æ›¿æ¢æ¨¡æ‹Ÿæ—¶é—´å‰ç¼€
                        if (text.includes("æ¨¡æ‹Ÿæ—¶é—´ ")) {
                            node.textContent = text.replace("æ¨¡æ‹Ÿæ—¶é—´: ", "SIM ").replace(" å°æ—¶", " HRS");
                            return;
                        }
                        if (text.includes("é€Ÿåº¦åˆ‡æ¢")) {
                            // ä½¿ç”¨æ­£åˆ™åˆ†å‰²ï¼šæ”¯æŒä¸­æ–‡å†’å·(ï¼š)ã€è‹±æ–‡å†’å·(:) ä»¥åŠå…¶åçš„ä»»æ„ç©ºæ ¼
                            const parts = text.split(/[:ï¼š]\s*/);
                            
                            if (parts.length > 1) {
                                const speedValue = parts[1];
                                node.textContent = `SPEED CHANGED: ${speedValue}`;
                            }
                            return;
                        }
                        // æ›¿æ¢çŠ¶æ€è¯æ±‡
                        if (dynamicTranslations[text]) {
                            node.textContent = dynamicTranslations[text];
                            return;
                        }
                    }
                    // 2. å¤„ç†æŒ‰é’® innerHTML è¢«è¦†ç›–çš„æƒ…å†µ (main.js: generateButton.textContent = "ç”Ÿæˆ")
                    else if (node.tagName === 'BUTTON' && node.id === 'generateButton') {
                        if (node.textContent === 'ç”Ÿæˆ') {
                            node.innerHTML = `<span class="relative z-10 flex items-center justify-center gap-2"><i class="fa-solid fa-power-off"></i> START</span>`;
                        }
                    }
                    else if (node.tagName === 'BUTTON' && node.id === 'pauseButton') {
                         if (dynamicTranslations[node.textContent]) {
                            node.textContent = dynamicTranslations[node.textContent];
                        }
                    }
                    else if (node.tagName === 'BUTTON' && node.id === 'copy-track-button') {
                         if (dynamicTranslations[node.textContent]) {
                            node.textContent = dynamicTranslations[node.textContent];
                        }
                    }
                    else if (node.id === 'status' || node.id === 'category') {
                         if (dynamicTranslations[node.textContent]) {
                            node.textContent = dynamicTranslations[node.textContent];
                        }
                    }
                    else if (node.id === 'simulationTime') {
                        const text = node.textContent;
                        if (text.includes("æ¨¡æ‹Ÿæ—¶é—´: ")) {
                            node.textContent = text.replace("æ¨¡æ‹Ÿæ—¶é—´: ", "SIM ").replace(" å°æ—¶", " HRS");
                        }
                    }
                });
            });

            // å¼€å§‹ç›‘å¬åŠ¨æ€å…ƒç´ 
            targetNodes.forEach(node => {
                if (node) observer.observe(node, observerConfig);
            });
            
            // è¾…åŠ©å‡½æ•°ï¼šæ‰‹åŠ¨è§¦å‘ä¸€æ¬¡æ£€æŸ¥ (ç”¨äºåˆ‡æ¢è¯­è¨€æ—¶ç«‹å³ç”Ÿæ•ˆ)
            function checkDynamicText() {
                if (currentLang === 'CN') {
                    // å¦‚æœåˆ‡å›ä¸­æ–‡ï¼Œè¿™é‡Œå¾ˆéš¾æ¢å¤åŸå§‹ JS çŠ¶æ€ï¼Œ
                    // ä½†ç”±äº main.js çš„å¾ªç¯åœ¨è·‘ï¼Œä¸‹ä¸€å¸§å®ƒä¼šè‡ªåŠ¨æ”¹å›ä¸­æ–‡ï¼Œæ‰€ä»¥é€šå¸¸ä¸éœ€è¦æ‰‹åŠ¨æ”¹å›ã€‚
                    return;
                }
                
                // å¼ºåˆ¶æ£€æŸ¥å½“å‰å€¼å¹¶ç¿»è¯‘
                targetNodes.forEach(el => {
                    if(!el) return;
                    
                    // ç‰¹æ®Šå¤„ç†æ—¶é—´
                    if(el.id === 'simulationTime' && el.textContent.includes('æ¨¡æ‹Ÿæ—¶é—´ ')) {
                        el.textContent = el.textContent.replace('æ¨¡æ‹Ÿæ—¶é—´: ', 'SIM ').replace(' å°æ—¶', ' HRS');
                    }
                    
                    // å¤„ç†æŒ‰é’®å›¾æ ‡æ¢å¤
                    if (el.id === 'generateButton' && el.textContent.trim() === 'ç”Ÿæˆ') {
                         el.innerHTML = `<span class="relative z-10 flex items-center justify-center gap-2"><i class="fa-solid fa-power-off"></i> START</span>`;
                    } else if (dynamicTranslations[el.textContent.trim()]) {
                        el.textContent = dynamicTranslations[el.textContent.trim()];
                    }
                });
            }
        });
    </script>
    <script>
            window.switchTab = function(tabId) {
                // 1. éšè—æ‰€æœ‰å†…å®¹åŒºåŸŸ
                document.querySelectorAll('.tab-content').forEach(el => {
                    el.classList.add('hidden');
                });
                // 2. æ˜¾ç¤ºç›®æ ‡å†…å®¹
                const targetContent = document.getElementById(tabId);
                if(targetContent) targetContent.classList.remove('hidden');

                // 3. æ›´æ–°ä¾§è¾¹æ æŒ‰é’®æ ·å¼
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    btn.classList.remove('text-cyan-400', 'bg-white/5', 'border-cyan-500/30');
                    btn.classList.add('text-slate-400', 'border-transparent');
                    
                    // å¦‚æœæ˜¯å½“å‰é€‰ä¸­çš„æŒ‰é’®
                    if(btn.dataset.target === tabId) {
                        btn.classList.remove('text-slate-400', 'border-transparent');
                        btn.classList.add('text-cyan-400', 'bg-white/5', 'border-l-2', 'border-cyan-500');
                    }
                });
            }
            
            // é»˜è®¤æ¿€æ´»æ¦‚è§ˆé¡µ
            document.addEventListener('DOMContentLoaded', () => {
                switchTab('tab-overview');
            });
        </script>
    <script>
    document.addEventListener("DOMContentLoaded", () => {
        // --- é…ç½® ---
        const loadingTime = 1000; // æŒç»­æ—¶é—´ 1000ms = 1ç§’
        const hints = [
            "ğŸ’¡ Hint: Warm SSTs (>26.5Â°C) are essential for cyclone formation.",
            "ğŸ’¡ Hint: High wind shear can tear a storm apart.",
            "ğŸ’¡ Hint: Double-click the map while opening the pressure tab to spawn a High Pressure system.",
            "ğŸ’¡ Hint: Land interaction weakens storms quickly due to friction.",
            "ğŸ’¡ Hint: Set observation post in the settings!",
            "ğŸ’¡ Hint: Use the 'History' tab to check historical data.",
            "ğŸ’¡ Hint: Try simulating a winter storm by changing the month!",
            "ğŸ’¡ Hint: Press Spacebar to pause/resume the simulation."
        ];

        // --- 1. è®¾ç½®éšæœºæç¤º ---
        const hintElement = document.getElementById('loading-hint');
        const randomHint = hints[Math.floor(Math.random() * hints.length)];
        hintElement.innerText = randomHint;

        // --- 2. å¯åŠ¨è¿›åº¦æ¡åŠ¨ç”» ---
        const bar = document.getElementById('loading-bar');
        const screen = document.getElementById('loading-screen');

        // ç¨å¾®å»¶è¿Ÿä¸€å¸§ä»¥è§¦å‘ CSS transition
        setTimeout(() => {
            bar.style.width = "100%";
        }, 50);

        // --- 3. ç»“æŸåŠ è½½ ---
        setTimeout(() => {
            // æ·¡å‡º
            screen.classList.add('opacity-0');
            
            // ç§»é™¤ DOM (é˜²æ­¢é®æŒ¡ç‚¹å‡»)
            setTimeout(() => {
                screen.style.display = 'none';
                // å¯é€‰ï¼šåœ¨è¿™é‡Œæ’­æ”¾ä¸€ä¸ª"åŠ è½½å®Œæˆ"çš„éŸ³æ•ˆ
                // if(typeof playToggleOn === 'function') playToggleOn();
            }, 500); // ç­‰å¾…æ·¡å‡ºåŠ¨ç”»ç»“æŸ
        }, loadingTime);
    });
    </script>
    <!-- JS é€»è¾‘æ–‡ä»¶ -->
    <script type="module" src="js/main.js"></script>
    <script type="module" src="js/satellite-view.js"></script>
</body>
</html>
